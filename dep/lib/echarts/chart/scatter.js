define("echarts/chart/scatter",["require","./base","../util/shape/Symbol","../component/axis","../component/grid","../component/dataZoom","../component/dataRange","../config","zrender/tool/util","zrender/tool/color","../chart"],function(t){function e(t,e,n,a,o){i.call(this,t,e,n,a,o),this.refresh(a)}var i=t("./base"),n=t("../util/shape/Symbol");t("../component/axis"),t("../component/grid"),t("../component/dataZoom"),t("../component/dataRange");var a=t("../config"),o=t("zrender/tool/util"),s=t("zrender/tool/color");return e.prototype={type:a.CHART_TYPE_SCATTER,_buildShape:function(){var t=this.series;this._sIndex2ColorMap={},this._symbol=this.option.symbolList,this._sIndex2ShapeMap={},this.selectedMap={},this.xMarkMap={};for(var e,i,n,o,r=this.component.legend,l=[],h=0,d=t.length;d>h;h++)if(e=t[h],i=e.name,e.type===a.CHART_TYPE_SCATTER){if(t[h]=this.reformOption(t[h]),this.legendHoverLink=t[h].legendHoverLink||this.legendHoverLink,this._sIndex2ShapeMap[h]=this.query(e,"symbol")||this._symbol[h%this._symbol.length],r){if(this.selectedMap[i]=r.isSelected(i),this._sIndex2ColorMap[h]=s.alpha(r.getColor(i),.5),n=r.getItemShape(i)){var o=this._sIndex2ShapeMap[h];n.style.brushType=o.match("empty")?"stroke":"both",o=o.replace("empty","").toLowerCase(),o.match("rectangle")&&(n.style.x+=Math.round((n.style.width-n.style.height)/2),n.style.width=n.style.height),o.match("star")&&(n.style.n=o.replace("star","")-0||5,o="star"),o.match("image")&&(n.style.image=o.replace(new RegExp("^image:\\/\\/"),""),n.style.x+=Math.round((n.style.width-n.style.height)/2),n.style.width=n.style.height,o="image"),n.style.iconType=o,r.setItemShape(i,n)}}else this.selectedMap[i]=!0,this._sIndex2ColorMap[h]=s.alpha(this.zr.getColor(h),.5);this.selectedMap[i]&&l.push(h)}this._buildSeries(l),this.addShapeList()},_buildSeries:function(t){if(0!==t.length){for(var e,i,n,a,o,s,r,l,h=this.series,d={},m=0,p=t.length;p>m;m++)if(e=t[m],i=h[e],0!==i.data.length){o=this.component.xAxis.getAxis(i.xAxisIndex||0),s=this.component.yAxis.getAxis(i.yAxisIndex||0),d[e]=[];for(var c=0,u=i.data.length;u>c;c++)n=i.data[c],a=this.getDataFromOption(n,"-"),"-"===a||a.length<2||(r=o.getCoord(a[0]),l=s.getCoord(a[1]),d[e].push([r,l,c,n.name||""]));this.xMarkMap[e]=this._markMap(o,s,i.data,d[e]),this.buildMark(e)}this._buildPointList(d)}},_markMap:function(t,e,i,n){for(var a,o={min0:Number.POSITIVE_INFINITY,max0:Number.NEGATIVE_INFINITY,sum0:0,counter0:0,average0:0,min1:Number.POSITIVE_INFINITY,max1:Number.NEGATIVE_INFINITY,sum1:0,counter1:0,average1:0},s=0,r=n.length;r>s;s++)a=i[n[s][2]].value||i[n[s][2]],o.min0>a[0]&&(o.min0=a[0],o.minY0=n[s][1],o.minX0=n[s][0]),o.max0<a[0]&&(o.max0=a[0],o.maxY0=n[s][1],o.maxX0=n[s][0]),o.sum0+=a[0],o.counter0++,o.min1>a[1]&&(o.min1=a[1],o.minY1=n[s][1],o.minX1=n[s][0]),o.max1<a[1]&&(o.max1=a[1],o.maxY1=n[s][1],o.maxX1=n[s][0]),o.sum1+=a[1],o.counter1++;var l=this.component.grid.getX(),h=this.component.grid.getXend(),d=this.component.grid.getY(),m=this.component.grid.getYend();o.average0=o.sum0/o.counter0;var p=t.getCoord(o.average0);o.averageLine0=[[p,m],[p,d]],o.minLine0=[[o.minX0,m],[o.minX0,d]],o.maxLine0=[[o.maxX0,m],[o.maxX0,d]],o.average1=o.sum1/o.counter1;var c=e.getCoord(o.average1);return o.averageLine1=[[l,c],[h,c]],o.minLine1=[[l,o.minY1],[h,o.minY1]],o.maxLine1=[[l,o.maxY1],[h,o.maxY1]],o},_buildPointList:function(t){var e,i,n,a,o=this.series;for(var s in t)if(e=o[s],i=t[s],e.large&&e.data.length>e.largeThreshold)this.shapeList.push(this._getLargeSymbol(i,this.getItemStyleColor(this.query(e,"itemStyle.normal.color"),s,-1)||this._sIndex2ColorMap[s]));else for(var r=0,l=i.length;l>r;r++)n=i[r],a=this._getSymbol(s,n[2],n[3],n[0],n[1]),a&&this.shapeList.push(a)},_getSymbol:function(t,e,i,n,a){var o,s=this.series,r=s[t],l=r.data[e],h=this.component.dataRange;if(h){if(o=isNaN(l[2])?this._sIndex2ColorMap[t]:h.getColor(l[2]),!o)return null}else o=this._sIndex2ColorMap[t];var d=this.getSymbolShape(r,t,l,e,i,n,a,this._sIndex2ShapeMap[t],o,"rgba(0,0,0,0)","vertical");return d.zlevel=this.getZlevelBase(),d.z=this.getZBase(),d._main=!0,d},_getLargeSymbol:function(t,e){return new n({zlevel:this.getZlevelBase(),z:this.getZBase(),_main:!0,hoverable:!1,style:{pointList:t,color:e,strokeColor:e},highlightStyle:{pointList:[]}})},getMarkCoord:function(t,e){var i,n=this.series[t],a=this.xMarkMap[t],o=this.component.xAxis.getAxis(n.xAxisIndex),s=this.component.yAxis.getAxis(n.yAxisIndex);if(!e.type||"max"!==e.type&&"min"!==e.type&&"average"!==e.type)i=["string"!=typeof e.xAxis&&o.getCoordByIndex?o.getCoordByIndex(e.xAxis||0):o.getCoord(e.xAxis||0),"string"!=typeof e.yAxis&&s.getCoordByIndex?s.getCoordByIndex(e.yAxis||0):s.getCoord(e.yAxis||0)];else{var r=null!=e.valueIndex?e.valueIndex:1;i=[a[e.type+"X"+r],a[e.type+"Y"+r],a[e.type+"Line"+r],a[e.type+r]]}return i},refresh:function(t){t&&(this.option=t,this.series=t.series),this.backupShapeList(),this._buildShape()},ondataRange:function(t,e){this.component.dataRange&&(this.refresh(),e.needRefresh=!0)}},o.inherits(e,i),t("../chart").define("scatter",e),e}),define("echarts/component/axis",["require","./base","zrender/shape/Line","../config","../util/ecData","zrender/tool/util","zrender/tool/color","./categoryAxis","./valueAxis","../component"],function(t){function e(t,e,n,a,o,s){i.call(this,t,e,n,a,o),this.axisType=s,this._axisList=[],this.refresh(a)}var i=t("./base"),n=t("zrender/shape/Line"),a=t("../config"),o=t("../util/ecData"),s=t("zrender/tool/util"),r=t("zrender/tool/color");return e.prototype={type:a.COMPONENT_TYPE_AXIS,axisBase:{_buildAxisLine:function(){var t=this.option.axisLine.lineStyle.width,e=t/2,i={_axisShape:"axisLine",zlevel:this.getZlevelBase(),z:this.getZBase()+3,hoverable:!1};switch(this.option.position){case"left":i.style={xStart:this.grid.getX()-e,yStart:this.grid.getYend(),xEnd:this.grid.getX()-e,yEnd:this.grid.getY(),lineCap:"round"};break;case"right":i.style={xStart:this.grid.getXend()+e,yStart:this.grid.getYend(),xEnd:this.grid.getXend()+e,yEnd:this.grid.getY(),lineCap:"round"};break;case"bottom":i.style={xStart:this.grid.getX(),yStart:this.grid.getYend()+e,xEnd:this.grid.getXend(),yEnd:this.grid.getYend()+e,lineCap:"round"};break;case"top":i.style={xStart:this.grid.getX(),yStart:this.grid.getY()-e,xEnd:this.grid.getXend(),yEnd:this.grid.getY()-e,lineCap:"round"}}""!==this.option.name&&(i.style.text=this.option.name,i.style.textPosition=this.option.nameLocation,i.style.textFont=this.getFont(this.option.nameTextStyle),this.option.nameTextStyle.align&&(i.style.textAlign=this.option.nameTextStyle.align),this.option.nameTextStyle.baseline&&(i.style.textBaseline=this.option.nameTextStyle.baseline),this.option.nameTextStyle.color&&(i.style.textColor=this.option.nameTextStyle.color)),i.style.strokeColor=this.option.axisLine.lineStyle.color,i.style.lineWidth=t,this.isHorizontal()?i.style.yStart=i.style.yEnd=this.subPixelOptimize(i.style.yEnd,t):i.style.xStart=i.style.xEnd=this.subPixelOptimize(i.style.xEnd,t),i.style.lineType=this.option.axisLine.lineStyle.type,i=new n(i),this.shapeList.push(i)},_axisLabelClickable:function(t,e){return t?(o.pack(e,void 0,-1,void 0,-1,e.style.text),e.hoverable=!0,e.clickable=!0,e.highlightStyle={color:r.lift(e.style.color,1),brushType:"fill"},e):e},refixAxisShape:function(t,e){if(this.option.axisLine.onZero){var i;if(this.isHorizontal()&&null!=e)for(var n=0,a=this.shapeList.length;a>n;n++)"axisLine"===this.shapeList[n]._axisShape?(this.shapeList[n].style.yStart=this.shapeList[n].style.yEnd=this.subPixelOptimize(e,this.shapeList[n].stylelineWidth),this.zr.modShape(this.shapeList[n].id)):"axisTick"===this.shapeList[n]._axisShape&&(i=this.shapeList[n].style.yEnd-this.shapeList[n].style.yStart,this.shapeList[n].style.yStart=e-i,this.shapeList[n].style.yEnd=e,this.zr.modShape(this.shapeList[n].id));if(!this.isHorizontal()&&null!=t)for(var n=0,a=this.shapeList.length;a>n;n++)"axisLine"===this.shapeList[n]._axisShape?(this.shapeList[n].style.xStart=this.shapeList[n].style.xEnd=this.subPixelOptimize(t,this.shapeList[n].stylelineWidth),this.zr.modShape(this.shapeList[n].id)):"axisTick"===this.shapeList[n]._axisShape&&(i=this.shapeList[n].style.xEnd-this.shapeList[n].style.xStart,this.shapeList[n].style.xStart=t,this.shapeList[n].style.xEnd=t+i,this.zr.modShape(this.shapeList[n].id))}},getPosition:function(){return this.option.position},isHorizontal:function(){return"bottom"===this.option.position||"top"===this.option.position}},reformOption:function(t){if(!t||t instanceof Array&&0===t.length?t=[{type:a.COMPONENT_TYPE_AXIS_VALUE}]:t instanceof Array||(t=[t]),t.length>2&&(t=[t[0],t[1]]),"xAxis"===this.axisType){(!t[0].position||"bottom"!=t[0].position&&"top"!=t[0].position)&&(t[0].position="bottom"),t.length>1&&(t[1].position="bottom"===t[0].position?"top":"bottom");for(var e=0,i=t.length;i>e;e++)t[e].type=t[e].type||"category",t[e].xAxisIndex=e,t[e].yAxisIndex=-1}else{(!t[0].position||"left"!=t[0].position&&"right"!=t[0].position)&&(t[0].position="left"),t.length>1&&(t[1].position="left"===t[0].position?"right":"left");for(var e=0,i=t.length;i>e;e++)t[e].type=t[e].type||"value",t[e].xAxisIndex=-1,t[e].yAxisIndex=e}return t},refresh:function(e){var i;e&&(this.option=e,"xAxis"===this.axisType?(this.option.xAxis=this.reformOption(e.xAxis),i=this.option.xAxis):(this.option.yAxis=this.reformOption(e.yAxis),i=this.option.yAxis),this.series=e.series);for(var n=t("./categoryAxis"),a=t("./valueAxis"),o=Math.max(i&&i.length||0,this._axisList.length),s=0;o>s;s++)!this._axisList[s]||!e||i[s]&&this._axisList[s].type==i[s].type||(this._axisList[s].dispose&&this._axisList[s].dispose(),this._axisList[s]=!1),this._axisList[s]?this._axisList[s].refresh&&this._axisList[s].refresh(i?i[s]:!1,this.series):i&&i[s]&&(this._axisList[s]="category"===i[s].type?new n(this.ecTheme,this.messageCenter,this.zr,i[s],this.myChart,this.axisBase):new a(this.ecTheme,this.messageCenter,this.zr,i[s],this.myChart,this.axisBase,this.series))},getAxis:function(t){return this._axisList[t]},clear:function(){for(var t=0,e=this._axisList.length;e>t;t++)this._axisList[t].dispose&&this._axisList[t].dispose();this._axisList=[]}},s.inherits(e,i),t("../component").define("axis",e),e}),define("echarts/component/grid",["require","./base","zrender/shape/Rectangle","../config","zrender/tool/util","../component"],function(t){function e(t,e,n,a,o){i.call(this,t,e,n,a,o),this.refresh(a)}var i=t("./base"),n=t("zrender/shape/Rectangle"),a=t("../config"),o=t("zrender/tool/util");return e.prototype={type:a.COMPONENT_TYPE_GRID,getX:function(){return this._x},getY:function(){return this._y},getWidth:function(){return this._width},getHeight:function(){return this._height},getXend:function(){return this._x+this._width},getYend:function(){return this._y+this._height},getArea:function(){return{x:this._x,y:this._y,width:this._width,height:this._height}},getBbox:function(){return[[this._x,this._y],[this.getXend(),this.getYend()]]},refixAxisShape:function(t){for(var e,i,n,o=t.xAxis._axisList.concat(t.yAxis?t.yAxis._axisList:[]),s=o.length;s--;)n=o[s],n.type==a.COMPONENT_TYPE_AXIS_VALUE&&n._min<0&&n._max>=0&&(n.isHorizontal()?e=n.getCoord(0):i=n.getCoord(0));if("undefined"!=typeof e||"undefined"!=typeof i)for(s=o.length;s--;)o[s].refixAxisShape(e,i)},refresh:function(t){if(t||this._zrWidth!=this.zr.getWidth()||this._zrHeight!=this.zr.getHeight()){this.clear(),this.option=t||this.option,this.option.grid=this.reformOption(this.option.grid);var e=this.option.grid;this._zrWidth=this.zr.getWidth(),this._zrHeight=this.zr.getHeight(),this._x=this.parsePercent(e.x,this._zrWidth),this._y=this.parsePercent(e.y,this._zrHeight);var i=this.parsePercent(e.x2,this._zrWidth),a=this.parsePercent(e.y2,this._zrHeight);this._width="undefined"==typeof e.width?this._zrWidth-this._x-i:this.parsePercent(e.width,this._zrWidth),this._width=this._width<=0?10:this._width,this._height="undefined"==typeof e.height?this._zrHeight-this._y-a:this.parsePercent(e.height,this._zrHeight),this._height=this._height<=0?10:this._height,this._x=this.subPixelOptimize(this._x,e.borderWidth),this._y=this.subPixelOptimize(this._y,e.borderWidth),this.shapeList.push(new n({zlevel:this.getZlevelBase(),z:this.getZBase(),hoverable:!1,style:{x:this._x,y:this._y,width:this._width,height:this._height,brushType:e.borderWidth>0?"both":"fill",color:e.backgroundColor,strokeColor:e.borderColor,lineWidth:e.borderWidth}})),this.zr.addShape(this.shapeList[0])}}},o.inherits(e,i),t("../component").define("grid",e),e}),define("echarts/component/dataZoom",["require","./base","zrender/shape/Rectangle","zrender/shape/Polygon","../util/shape/Icon","../config","../util/date","zrender/tool/util","../component"],function(t){function e(t,e,n,a,o){i.call(this,t,e,n,a,o);var s=this;s._ondrift=function(t,e){return s.__ondrift(this,t,e)},s._ondragend=function(){return s.__ondragend()},this._fillerSize=28,this._isSilence=!1,this._zoom={},this.option.dataZoom=this.reformOption(this.option.dataZoom),this.zoomOption=this.option.dataZoom,this._handleSize=this.zoomOption.handleSize,this.myChart.canvasSupported||(this.zoomOption.realtime=!1),this._location=this._getLocation(),this._zoom=this._getZoom(),this._backupData(),this.option.dataZoom.show&&this._buildShape(),this._syncData()}var i=t("./base"),n=t("zrender/shape/Rectangle"),a=t("zrender/shape/Polygon"),o=t("../util/shape/Icon"),s=t("../config"),r=t("../util/date"),l=t("zrender/tool/util");return e.prototype={type:s.COMPONENT_TYPE_DATAZOOM,_buildShape:function(){this._buildBackground(),this._buildFiller(),this._buildHandle(),this._buildFrame();for(var t=0,e=this.shapeList.length;e>t;t++)this.zr.addShape(this.shapeList[t]);this._syncFrameShape()},_getLocation:function(){var t,e,i,n,a=this.component.grid;return"horizontal"==this.zoomOption.orient?(i=this.zoomOption.width||a.getWidth(),n=this.zoomOption.height||this._fillerSize,t=null!=this.zoomOption.x?this.zoomOption.x:a.getX(),e=null!=this.zoomOption.y?this.zoomOption.y:this.zr.getHeight()-n-2):(i=this.zoomOption.width||this._fillerSize,n=this.zoomOption.height||a.getHeight(),t=null!=this.zoomOption.x?this.zoomOption.x:2,e=null!=this.zoomOption.y?this.zoomOption.y:a.getY()),{x:t,y:e,width:i,height:n}},_getZoom:function(){var t=this.option.series,e=this.option.xAxis;!e||e instanceof Array||(e=[e],this.option.xAxis=e);var i=this.option.yAxis;!i||i instanceof Array||(i=[i],this.option.yAxis=i);var n,a,o=[],r=this.zoomOption.xAxisIndex;if(e&&null==r){n=[];for(var l=0,h=e.length;h>l;l++)("category"==e[l].type||null==e[l].type)&&n.push(l)}else n=r instanceof Array?r:null!=r?[r]:[];if(r=this.zoomOption.yAxisIndex,i&&null==r){a=[];for(var l=0,h=i.length;h>l;l++)"category"==i[l].type&&a.push(l)}else a=r instanceof Array?r:null!=r?[r]:[];for(var d,l=0,h=t.length;h>l;l++)if(d=t[l],d.type==s.CHART_TYPE_LINE||d.type==s.CHART_TYPE_BAR||d.type==s.CHART_TYPE_SCATTER||d.type==s.CHART_TYPE_K){for(var m=0,p=n.length;p>m;m++)if(n[m]==(d.xAxisIndex||0)){o.push(l);break}for(var m=0,p=a.length;p>m;m++)if(a[m]==(d.yAxisIndex||0)){o.push(l);break}null==this.zoomOption.xAxisIndex&&null==this.zoomOption.yAxisIndex&&d.data&&this.getDataFromOption(d.data[0])instanceof Array&&(d.type==s.CHART_TYPE_SCATTER||d.type==s.CHART_TYPE_LINE||d.type==s.CHART_TYPE_BAR)&&o.push(l)}var c=null!=this._zoom.start?this._zoom.start:null!=this.zoomOption.start?this.zoomOption.start:0,u=null!=this._zoom.end?this._zoom.end:null!=this.zoomOption.end?this.zoomOption.end:100;c>u&&(c+=u,u=c-u,c-=u);var g=Math.round((u-c)/100*("horizontal"==this.zoomOption.orient?this._location.width:this._location.height));return{start:c,end:u,start2:0,end2:100,size:g,xAxisIndex:n,yAxisIndex:a,seriesIndex:o,scatterMap:this._zoom.scatterMap||{}}},_backupData:function(){this._originalData={xAxis:{},yAxis:{},series:{}};for(var t=this.option.xAxis,e=this._zoom.xAxisIndex,i=0,n=e.length;n>i;i++)this._originalData.xAxis[e[i]]=t[e[i]].data;for(var a=this.option.yAxis,o=this._zoom.yAxisIndex,i=0,n=o.length;n>i;i++)this._originalData.yAxis[o[i]]=a[o[i]].data;for(var r,l=this.option.series,h=this._zoom.seriesIndex,i=0,n=h.length;n>i;i++)r=l[h[i]],this._originalData.series[h[i]]=r.data,r.data&&this.getDataFromOption(r.data[0])instanceof Array&&(r.type==s.CHART_TYPE_SCATTER||r.type==s.CHART_TYPE_LINE||r.type==s.CHART_TYPE_BAR)&&(this._backupScale(),this._calculScatterMap(h[i]))},_calculScatterMap:function(e){this._zoom.scatterMap=this._zoom.scatterMap||{},this._zoom.scatterMap[e]=this._zoom.scatterMap[e]||{};var i=t("../component"),n=i.get("axis"),a=l.clone(this.option.xAxis);"category"==a[0].type&&(a[0].type="value"),a[1]&&"category"==a[1].type&&(a[1].type="value");var o=new n(this.ecTheme,null,!1,{xAxis:a,series:this.option.series},this,"xAxis"),s=this.option.series[e].xAxisIndex||0;this._zoom.scatterMap[e].x=o.getAxis(s).getExtremum(),o.dispose(),a=l.clone(this.option.yAxis),"category"==a[0].type&&(a[0].type="value"),a[1]&&"category"==a[1].type&&(a[1].type="value"),o=new n(this.ecTheme,null,!1,{yAxis:a,series:this.option.series},this,"yAxis"),s=this.option.series[e].yAxisIndex||0,this._zoom.scatterMap[e].y=o.getAxis(s).getExtremum(),o.dispose()},_buildBackground:function(){var t=this._location.width,e=this._location.height;this.shapeList.push(new n({zlevel:this.getZlevelBase(),z:this.getZBase(),hoverable:!1,style:{x:this._location.x,y:this._location.y,width:t,height:e,color:this.zoomOption.backgroundColor}}));for(var i=0,o=this._originalData.xAxis,r=this._zoom.xAxisIndex,l=0,h=r.length;h>l;l++)i=Math.max(i,o[r[l]].length);for(var d=this._originalData.yAxis,m=this._zoom.yAxisIndex,l=0,h=m.length;h>l;l++)i=Math.max(i,d[m[l]].length);for(var p,c=this._zoom.seriesIndex[0],u=this._originalData.series[c],g=Number.MIN_VALUE,y=Number.MAX_VALUE,l=0,h=u.length;h>l;l++)p=this.getDataFromOption(u[l],0),this.option.series[c].type==s.CHART_TYPE_K&&(p=p[1]),isNaN(p)&&(p=0),g=Math.max(g,p),y=Math.min(y,p);var V=g-y,U=[],f=t/(i-(i>1?1:0)),_=e/(i-(i>1?1:0)),b=1;"horizontal"==this.zoomOption.orient&&1>f?b=Math.floor(3*i/t):"vertical"==this.zoomOption.orient&&1>_&&(b=Math.floor(3*i/e));for(var l=0,h=i;h>l;l+=b)p=this.getDataFromOption(u[l],0),this.option.series[c].type==s.CHART_TYPE_K&&(p=p[1]),isNaN(p)&&(p=0),U.push("horizontal"==this.zoomOption.orient?[this._location.x+f*l,this._location.y+e-1-Math.round((p-y)/V*(e-10))]:[this._location.x+1+Math.round((p-y)/V*(t-10)),this._location.y+_*l]);"horizontal"==this.zoomOption.orient?(U.push([this._location.x+t,this._location.y+e]),U.push([this._location.x,this._location.y+e])):(U.push([this._location.x,this._location.y+e]),U.push([this._location.x,this._location.y])),this.shapeList.push(new a({zlevel:this.getZlevelBase(),z:this.getZBase(),style:{pointList:U,color:this.zoomOption.dataBackgroundColor},hoverable:!1}))},_buildFiller:function(){this._fillerShae={zlevel:this.getZlevelBase(),z:this.getZBase(),draggable:!0,ondrift:this._ondrift,ondragend:this._ondragend,_type:"filler"},this._fillerShae.style="horizontal"==this.zoomOption.orient?{x:this._location.x+Math.round(this._zoom.start/100*this._location.width)+this._handleSize,y:this._location.y,width:this._zoom.size-2*this._handleSize,height:this._location.height,color:this.zoomOption.fillerColor,text:":::",textPosition:"inside"}:{x:this._location.x,y:this._location.y+Math.round(this._zoom.start/100*this._location.height)+this._handleSize,width:this._location.width,height:this._zoom.size-2*this._handleSize,color:this.zoomOption.fillerColor,text:"::",textPosition:"inside"},this._fillerShae.highlightStyle={brushType:"fill",color:"rgba(0,0,0,0)"},this._fillerShae=new n(this._fillerShae),this.shapeList.push(this._fillerShae)},_buildHandle:function(){var t=this.zoomOption.showDetail?this._getDetail():{start:"",end:""};this._startShape={zlevel:this.getZlevelBase(),z:this.getZBase(),draggable:!0,style:{iconType:"rectangle",x:this._location.x,y:this._location.y,width:this._handleSize,height:this._handleSize,color:this.zoomOption.handleColor,text:"=",textPosition:"inside"},highlightStyle:{text:t.start,brushType:"fill",textPosition:"left"},ondrift:this._ondrift,ondragend:this._ondragend},"horizontal"==this.zoomOption.orient?(this._startShape.style.height=this._location.height,this._endShape=l.clone(this._startShape),this._startShape.style.x=this._fillerShae.style.x-this._handleSize,this._endShape.style.x=this._fillerShae.style.x+this._fillerShae.style.width,this._endShape.highlightStyle.text=t.end,this._endShape.highlightStyle.textPosition="right"):(this._startShape.style.width=this._location.width,this._endShape=l.clone(this._startShape),this._startShape.style.y=this._fillerShae.style.y-this._handleSize,this._startShape.highlightStyle.textPosition="top",this._endShape.style.y=this._fillerShae.style.y+this._fillerShae.style.height,this._endShape.highlightStyle.text=t.end,this._endShape.highlightStyle.textPosition="bottom"),this._startShape=new o(this._startShape),this._endShape=new o(this._endShape),this.shapeList.push(this._startShape),this.shapeList.push(this._endShape)},_buildFrame:function(){var t=this.subPixelOptimize(this._location.x,1),e=this.subPixelOptimize(this._location.y,1);this._startFrameShape={zlevel:this.getZlevelBase(),z:this.getZBase(),hoverable:!1,style:{x:t,y:e,width:this._location.width-(t>this._location.x?1:0),height:this._location.height-(e>this._location.y?1:0),lineWidth:1,brushType:"stroke",strokeColor:this.zoomOption.handleColor}},this._endFrameShape=l.clone(this._startFrameShape),this._startFrameShape=new n(this._startFrameShape),this._endFrameShape=new n(this._endFrameShape),this.shapeList.push(this._startFrameShape),this.shapeList.push(this._endFrameShape)},_syncHandleShape:function(){"horizontal"==this.zoomOption.orient?(this._startShape.style.x=this._fillerShae.style.x-this._handleSize,this._endShape.style.x=this._fillerShae.style.x+this._fillerShae.style.width,this._zoom.start=(this._startShape.style.x-this._location.x)/this._location.width*100,this._zoom.end=(this._endShape.style.x+this._handleSize-this._location.x)/this._location.width*100):(this._startShape.style.y=this._fillerShae.style.y-this._handleSize,this._endShape.style.y=this._fillerShae.style.y+this._fillerShae.style.height,this._zoom.start=(this._startShape.style.y-this._location.y)/this._location.height*100,this._zoom.end=(this._endShape.style.y+this._handleSize-this._location.y)/this._location.height*100),this.zr.modShape(this._startShape.id),this.zr.modShape(this._endShape.id),this._syncFrameShape(),this.zr.refresh()},_syncFillerShape:function(){var t,e;"horizontal"==this.zoomOption.orient?(t=this._startShape.style.x,e=this._endShape.style.x,this._fillerShae.style.x=Math.min(t,e)+this._handleSize,this._fillerShae.style.width=Math.abs(t-e)-this._handleSize,this._zoom.start=(Math.min(t,e)-this._location.x)/this._location.width*100,this._zoom.end=(Math.max(t,e)+this._handleSize-this._location.x)/this._location.width*100):(t=this._startShape.style.y,e=this._endShape.style.y,this._fillerShae.style.y=Math.min(t,e)+this._handleSize,this._fillerShae.style.height=Math.abs(t-e)-this._handleSize,this._zoom.start=(Math.min(t,e)-this._location.y)/this._location.height*100,this._zoom.end=(Math.max(t,e)+this._handleSize-this._location.y)/this._location.height*100),this.zr.modShape(this._fillerShae.id),this._syncFrameShape(),this.zr.refresh()},_syncFrameShape:function(){"horizontal"==this.zoomOption.orient?(this._startFrameShape.style.width=this._fillerShae.style.x-this._location.x,this._endFrameShape.style.x=this._fillerShae.style.x+this._fillerShae.style.width,this._endFrameShape.style.width=this._location.x+this._location.width-this._endFrameShape.style.x):(this._startFrameShape.style.height=this._fillerShae.style.y-this._location.y,this._endFrameShape.style.y=this._fillerShae.style.y+this._fillerShae.style.height,this._endFrameShape.style.height=this._location.y+this._location.height-this._endFrameShape.style.y),this.zr.modShape(this._startFrameShape.id),this.zr.modShape(this._endFrameShape.id)},_syncShape:function(){this.zoomOption.show&&("horizontal"==this.zoomOption.orient?(this._startShape.style.x=this._location.x+this._zoom.start/100*this._location.width,this._endShape.style.x=this._location.x+this._zoom.end/100*this._location.width-this._handleSize,this._fillerShae.style.x=this._startShape.style.x+this._handleSize,this._fillerShae.style.width=this._endShape.style.x-this._startShape.style.x-this._handleSize):(this._startShape.style.y=this._location.y+this._zoom.start/100*this._location.height,this._endShape.style.y=this._location.y+this._zoom.end/100*this._location.height-this._handleSize,this._fillerShae.style.y=this._startShape.style.y+this._handleSize,this._fillerShae.style.height=this._endShape.style.y-this._startShape.style.y-this._handleSize),this.zr.modShape(this._startShape.id),this.zr.modShape(this._endShape.id),this.zr.modShape(this._fillerShae.id),this._syncFrameShape(),this.zr.refresh())},_syncData:function(t){var e,i,n,a,o;for(var r in this._originalData){e=this._originalData[r];for(var l in e)o=e[l],null!=o&&(a=o.length,i=Math.floor(this._zoom.start/100*a),n=Math.ceil(this._zoom.end/100*a),this.getDataFromOption(o[0])instanceof Array&&this.option[r][l].type!=s.CHART_TYPE_K?(this._setScale(),this.option[r][l].data=this._synScatterData(l,o)):this.option[r][l].data=o.slice(i,n))}this._isSilence||!this.zoomOption.realtime&&!t||this.messageCenter.dispatch(s.EVENT.DATA_ZOOM,null,{zoom:this._zoom},this.myChart)},_synScatterData:function(t,e){if(0===this._zoom.start&&100==this._zoom.end&&0===this._zoom.start2&&100==this._zoom.end2)return e;var i,n,a,o,s,r=[],l=this._zoom.scatterMap[t];"horizontal"==this.zoomOption.orient?(i=l.x.max-l.x.min,n=this._zoom.start/100*i+l.x.min,a=this._zoom.end/100*i+l.x.min,i=l.y.max-l.y.min,o=this._zoom.start2/100*i+l.y.min,s=this._zoom.end2/100*i+l.y.min):(i=l.x.max-l.x.min,n=this._zoom.start2/100*i+l.x.min,a=this._zoom.end2/100*i+l.x.min,i=l.y.max-l.y.min,o=this._zoom.start/100*i+l.y.min,s=this._zoom.end/100*i+l.y.min);for(var h,d=0,m=e.length;m>d;d++)h=e[d].value||e[d],h[0]>=n&&h[0]<=a&&h[1]>=o&&h[1]<=s&&r.push(e[d]);return r},_setScale:function(){var t=0!==this._zoom.start||100!==this._zoom.end||0!==this._zoom.start2||100!==this._zoom.end2,e={xAxis:this.option.xAxis,yAxis:this.option.yAxis};for(var i in e)for(var n=0,a=e[i].length;a>n;n++)e[i][n].scale=t||e[i][n]._scale},_backupScale:function(){var t={xAxis:this.option.xAxis,yAxis:this.option.yAxis};for(var e in t)for(var i=0,n=t[e].length;n>i;i++)t[e][i]._scale=t[e][i].scale},_getDetail:function(){var t="horizontal"==this.zoomOption.orient?"xAxis":"yAxis",e=this._originalData[t];for(var i in e){var n=e[i];if(null!=n){var a=n.length,o=Math.floor(this._zoom.start/100*a),s=Math.ceil(this._zoom.end/100*a);return s-=s>0?1:0,{start:this.getDataFromOption(n[o]),end:this.getDataFromOption(n[s])}}}var l=this._zoom.seriesIndex[0],h=this.option.series[l][t+"Index"]||0,d=this.option[t][h].type,m=this._zoom.scatterMap[l][t.charAt(0)].min,p=this._zoom.scatterMap[l][t.charAt(0)].max,c=p-m;if("value"==d)return{start:m+c*this._zoom.start/100,end:m+c*this._zoom.end/100};if("time"==d){p=m+c*this._zoom.end/100,m+=c*this._zoom.start/100;var u=r.getAutoFormatter(m,p).formatter;return{start:r.format(u,m),end:r.format(u,p)}}return{start:"",end:""}},__ondrift:function(t,e,i){this.zoomOption.zoomLock&&(t=this._fillerShae);var n="filler"==t._type?this._handleSize:0;if("horizontal"==this.zoomOption.orient?t.style.x+e-n<=this._location.x?t.style.x=this._location.x+n:t.style.x+e+t.style.width+n>=this._location.x+this._location.width?t.style.x=this._location.x+this._location.width-t.style.width-n:t.style.x+=e:t.style.y+i-n<=this._location.y?t.style.y=this._location.y+n:t.style.y+i+t.style.height+n>=this._location.y+this._location.height?t.style.y=this._location.y+this._location.height-t.style.height-n:t.style.y+=i,"filler"==t._type?this._syncHandleShape():this._syncFillerShape(),this.zoomOption.realtime&&this._syncData(),this.zoomOption.showDetail){var a=this._getDetail();this._startShape.style.text=this._startShape.highlightStyle.text=a.start,this._endShape.style.text=this._endShape.highlightStyle.text=a.end,this._startShape.style.textPosition=this._startShape.highlightStyle.textPosition,this._endShape.style.textPosition=this._endShape.highlightStyle.textPosition}return!0},__ondragend:function(){this.zoomOption.showDetail&&(this._startShape.style.text=this._endShape.style.text="=",this._startShape.style.textPosition=this._endShape.style.textPosition="inside",this.zr.modShape(this._startShape.id),this.zr.modShape(this._endShape.id),this.zr.refreshNextFrame()),this.isDragend=!0},ondragend:function(t,e){this.isDragend&&t.target&&(!this.zoomOption.realtime&&this._syncData(),e.dragOut=!0,e.dragIn=!0,this._isSilence||this.zoomOption.realtime||this.messageCenter.dispatch(s.EVENT.DATA_ZOOM,null,{zoom:this._zoom},this.myChart),e.needRefresh=!1,this.isDragend=!1)},ondataZoom:function(t,e){e.needRefresh=!0},absoluteZoom:function(t){this._zoom.start=t.start,this._zoom.end=t.end,this._zoom.start2=t.start2,this._zoom.end2=t.end2,this._syncShape(),this._syncData(!0)},rectZoom:function(t){if(!t)return this._zoom.start=this._zoom.start2=0,this._zoom.end=this._zoom.end2=100,this._syncShape(),this._syncData(!0),this._zoom;var e=this.component.grid.getArea(),i={x:t.x,y:t.y,width:t.width,height:t.height};if(i.width<0&&(i.x+=i.width,i.width=-i.width),i.height<0&&(i.y+=i.height,i.height=-i.height),i.x>e.x+e.width||i.y>e.y+e.height)return!1;i.x<e.x&&(i.x=e.x),i.x+i.width>e.x+e.width&&(i.width=e.x+e.width-i.x),i.y+i.height>e.y+e.height&&(i.height=e.y+e.height-i.y);var n,a=(i.x-e.x)/e.width,o=1-(i.x+i.width-e.x)/e.width,s=1-(i.y+i.height-e.y)/e.height,r=(i.y-e.y)/e.height;return"horizontal"==this.zoomOption.orient?(n=this._zoom.end-this._zoom.start,this._zoom.start+=n*a,this._zoom.end-=n*o,n=this._zoom.end2-this._zoom.start2,this._zoom.start2+=n*s,this._zoom.end2-=n*r):(n=this._zoom.end-this._zoom.start,this._zoom.start+=n*s,this._zoom.end-=n*r,n=this._zoom.end2-this._zoom.start2,this._zoom.start2+=n*a,this._zoom.end2-=n*o),this._syncShape(),this._syncData(!0),this._zoom},syncBackupData:function(t){for(var e,i,n=this._originalData.series,a=t.series,o=0,s=a.length;s>o;o++){i=a[o].data||a[o].eventList,e=n[o]?Math.floor(this._zoom.start/100*n[o].length):0;for(var r=0,l=i.length;l>r;r++)n[o]&&(n[o][r+e]=i[r])}},syncOption:function(t){this.silence(!0),this.option=t,this.option.dataZoom=this.reformOption(this.option.dataZoom),this.zoomOption=this.option.dataZoom,this.myChart.canvasSupported||(this.zoomOption.realtime=!1),this.clear(),this._location=this._getLocation(),this._zoom=this._getZoom(),this._backupData(),this.option.dataZoom&&this.option.dataZoom.show&&this._buildShape(),this._syncData(),this.silence(!1)},silence:function(t){this._isSilence=t},getRealDataIndex:function(t,e){if(!this._originalData||0===this._zoom.start&&100==this._zoom.end)return e;var i=this._originalData.series;return i[t]?Math.floor(this._zoom.start/100*i[t].length)+e:-1},resize:function(){this.clear(),this._location=this._getLocation(),this._zoom=this._getZoom(),this.option.dataZoom.show&&this._buildShape()}},l.inherits(e,i),t("../component").define("dataZoom",e),e}),define("echarts/component/dataRange",["require","./base","zrender/shape/Text","zrender/shape/Rectangle","../util/shape/HandlePolygon","../config","zrender/tool/util","zrender/tool/event","zrender/tool/area","zrender/tool/color","../component"],function(t){function e(t,e,n,a,o){if("undefined"==typeof this.query(a,"dataRange.min")||"undefined"==typeof this.query(a,"dataRange.max"))return void console.error("option.dataRange.min or option.dataRange.max has not been defined.");i.call(this,t,e,n,a,o);var r=this;r._ondrift=function(t,e){return r.__ondrift(this,t,e)},r._ondragend=function(){return r.__ondragend()},r._dataRangeSelected=function(t){return r.__dataRangeSelected(t)},r._dispatchHoverLink=function(t){return r.__dispatchHoverLink(t)},r._onhoverlink=function(t){return r.__onhoverlink(t)},this._selectedMap={},this._range={},this.refresh(a),e.bind(s.EVENT.HOVER,this._onhoverlink)
}var i=t("./base"),n=t("zrender/shape/Text"),a=t("zrender/shape/Rectangle"),o=t("../util/shape/HandlePolygon"),s=t("../config"),r=t("zrender/tool/util"),l=t("zrender/tool/event"),h=t("zrender/tool/area"),d=t("zrender/tool/color");return e.prototype={type:s.COMPONENT_TYPE_DATARANGE,_textGap:10,_buildShape:function(){if(this._itemGroupLocation=this._getItemGroupLocation(),this._buildBackground(),this.dataRangeOption.splitNumber<=0||this.dataRangeOption.calculable?this._buildGradient():this._buildItem(),this.dataRangeOption.show)for(var t=0,e=this.shapeList.length;e>t;t++)this.zr.addShape(this.shapeList[t]);this._syncShapeFromRange()},_buildItem:function(){var t,e,i,o,s=this._valueTextList,r=s.length,l=this.getFont(this.dataRangeOption.textStyle),d=this._itemGroupLocation.x,m=this._itemGroupLocation.y,p=this.dataRangeOption.itemWidth,c=this.dataRangeOption.itemHeight,u=this.dataRangeOption.itemGap,g=h.getTextHeight("国",l);"vertical"==this.dataRangeOption.orient&&"right"==this.dataRangeOption.x&&(d=this._itemGroupLocation.x+this._itemGroupLocation.width-p);var y=!0;this.dataRangeOption.text&&(y=!1,this.dataRangeOption.text[0]&&(i=this._getTextShape(d,m,this.dataRangeOption.text[0]),"horizontal"==this.dataRangeOption.orient?d+=h.getTextWidth(this.dataRangeOption.text[0],l)+this._textGap:(m+=g+this._textGap,i.style.y+=g/2+this._textGap,i.style.textBaseline="bottom"),this.shapeList.push(new n(i))));for(var V=0;r>V;V++)t=s[V],o=this.getColorByIndex(V),e=this._getItemShape(d,m,p,c,this._selectedMap[V]?o:"#ccc"),e._idx=V,e.onmousemove=this._dispatchHoverLink,this.dataRangeOption.selectedMode&&(e.clickable=!0,e.onclick=this._dataRangeSelected),this.shapeList.push(new a(e)),y&&(i={zlevel:this.getZlevelBase(),z:this.getZBase(),style:{x:d+p+5,y:m,color:this._selectedMap[V]?this.dataRangeOption.textStyle.color:"#ccc",text:s[V],textFont:l,textBaseline:"top"},highlightStyle:{brushType:"fill"}},"vertical"==this.dataRangeOption.orient&&"right"==this.dataRangeOption.x&&(i.style.x-=p+10,i.style.textAlign="right"),i._idx=V,i.onmousemove=this._dispatchHoverLink,this.dataRangeOption.selectedMode&&(i.clickable=!0,i.onclick=this._dataRangeSelected),this.shapeList.push(new n(i))),"horizontal"==this.dataRangeOption.orient?d+=p+(y?5:0)+(y?h.getTextWidth(t,l):0)+u:m+=c+u;!y&&this.dataRangeOption.text[1]&&("horizontal"==this.dataRangeOption.orient?d=d-u+this._textGap:m=m-u+this._textGap,i=this._getTextShape(d,m,this.dataRangeOption.text[1]),"horizontal"!=this.dataRangeOption.orient&&(i.style.y-=5,i.style.textBaseline="top"),this.shapeList.push(new n(i)))},_buildGradient:function(){var e,i,o=this.getFont(this.dataRangeOption.textStyle),s=this._itemGroupLocation.x,r=this._itemGroupLocation.y,l=this.dataRangeOption.itemWidth,d=this.dataRangeOption.itemHeight,m=h.getTextHeight("国",o),p=10,c=!0;this.dataRangeOption.text&&(c=!1,this.dataRangeOption.text[0]&&(i=this._getTextShape(s,r,this.dataRangeOption.text[0]),"horizontal"==this.dataRangeOption.orient?s+=h.getTextWidth(this.dataRangeOption.text[0],o)+this._textGap:(r+=m+this._textGap,i.style.y+=m/2+this._textGap,i.style.textBaseline="bottom"),this.shapeList.push(new n(i))));for(var u=t("zrender/tool/color"),g=1/(this.dataRangeOption.color.length-1),y=[],V=0,U=this.dataRangeOption.color.length;U>V;V++)y.push([V*g,this.dataRangeOption.color[V]]);"horizontal"==this.dataRangeOption.orient?(e={zlevel:this.getZlevelBase(),z:this.getZBase(),style:{x:s,y:r,width:l*p,height:d,color:u.getLinearGradient(s,r,s+l*p,r,y)},hoverable:!1},s+=l*p+this._textGap):(e={zlevel:this.getZlevelBase(),z:this.getZBase(),style:{x:s,y:r,width:l,height:d*p,color:u.getLinearGradient(s,r,s,r+d*p,y)},hoverable:!1},r+=d*p+this._textGap),this.shapeList.push(new a(e)),this._calculableLocation=e.style,this.dataRangeOption.calculable&&(this._buildFiller(),this._bulidMask(),this._bulidHandle()),this._buildIndicator(),!c&&this.dataRangeOption.text[1]&&(i=this._getTextShape(s,r,this.dataRangeOption.text[1]),this.shapeList.push(new n(i)))},_buildIndicator:function(){var t,e,i=this._calculableLocation.x,n=this._calculableLocation.y,a=this._calculableLocation.width,s=this._calculableLocation.height,r=5;"horizontal"==this.dataRangeOption.orient?"bottom"!=this.dataRangeOption.y?(t=[[i,n+s],[i-r,n+s+r],[i+r,n+s+r]],e="bottom"):(t=[[i,n],[i-r,n-r],[i+r,n-r]],e="top"):"right"!=this.dataRangeOption.x?(t=[[i+a,n],[i+a+r,n-r],[i+a+r,n+r]],e="right"):(t=[[i,n],[i-r,n-r],[i-r,n+r]],e="left"),this._indicatorShape={style:{pointList:t,color:"#fff",__rect:{x:Math.min(t[0][0],t[1][0]),y:Math.min(t[0][1],t[1][1]),width:r*("horizontal"==this.dataRangeOption.orient?2:1),height:r*("horizontal"==this.dataRangeOption.orient?1:2)}},highlightStyle:{brushType:"fill",textPosition:e,textColor:this.dataRangeOption.textStyle.color},hoverable:!1},this._indicatorShape=new o(this._indicatorShape)},_buildFiller:function(){this._fillerShape={zlevel:this.getZlevelBase(),z:this.getZBase()+1,style:{x:this._calculableLocation.x,y:this._calculableLocation.y,width:this._calculableLocation.width,height:this._calculableLocation.height,color:"rgba(255,255,255,0)"},highlightStyle:{strokeColor:"rgba(255,255,255,0.5)",lineWidth:1},draggable:!0,ondrift:this._ondrift,ondragend:this._ondragend,onmousemove:this._dispatchHoverLink,_type:"filler"},this._fillerShape=new a(this._fillerShape),this.shapeList.push(this._fillerShape)},_bulidHandle:function(){var t,e,i,n,a,s,r,l,d=this._calculableLocation.x,m=this._calculableLocation.y,p=this._calculableLocation.width,c=this._calculableLocation.height,u=this.getFont(this.dataRangeOption.textStyle),g=h.getTextHeight("国",u),y=Math.max(h.getTextWidth(this._textFormat(this.dataRangeOption.max),u),h.getTextWidth(this._textFormat(this.dataRangeOption.min),u))+2;"horizontal"==this.dataRangeOption.orient?"bottom"!=this.dataRangeOption.y?(t=[[d,m],[d,m+c+g],[d-g,m+c+g],[d-1,m+c],[d-1,m]],e=d-y/2-g,i=m+c+g/2+2,n={x:d-y-g,y:m+c,width:y+g,height:g},a=[[d+p,m],[d+p,m+c+g],[d+p+g,m+c+g],[d+p+1,m+c],[d+p+1,m]],s=d+p+y/2+g,r=i,l={x:d+p,y:m+c,width:y+g,height:g}):(t=[[d,m+c],[d,m-g],[d-g,m-g],[d-1,m],[d-1,m+c]],e=d-y/2-g,i=m-g/2-2,n={x:d-y-g,y:m-g,width:y+g,height:g},a=[[d+p,m+c],[d+p,m-g],[d+p+g,m-g],[d+p+1,m],[d+p+1,m+c]],s=d+p+y/2+g,r=i,l={x:d+p,y:m-g,width:y+g,height:g}):(y+=g,"right"!=this.dataRangeOption.x?(t=[[d,m],[d+p+g,m],[d+p+g,m-g],[d+p,m-1],[d,m-1]],e=d+p+y/2+g/2,i=m-g/2,n={x:d+p,y:m-g,width:y+g,height:g},a=[[d,m+c],[d+p+g,m+c],[d+p+g,m+g+c],[d+p,m+1+c],[d,m+c+1]],s=e,r=m+c+g/2,l={x:d+p,y:m+c,width:y+g,height:g}):(t=[[d+p,m],[d-g,m],[d-g,m-g],[d,m-1],[d+p,m-1]],e=d-y/2-g/2,i=m-g/2,n={x:d-y-g,y:m-g,width:y+g,height:g},a=[[d+p,m+c],[d-g,m+c],[d-g,m+g+c],[d,m+1+c],[d+p,m+c+1]],s=e,r=m+c+g/2,l={x:d-y-g,y:m+c,width:y+g,height:g})),this._startShape={style:{pointList:t,text:this._textFormat(this.dataRangeOption.max),textX:e,textY:i,textFont:u,color:this.getColor(this.dataRangeOption.max),rect:n,x:t[0][0],y:t[0][1],_x:t[0][0],_y:t[0][1]}},this._startShape.highlightStyle={strokeColor:this._startShape.style.color,lineWidth:1},this._endShape={style:{pointList:a,text:this._textFormat(this.dataRangeOption.min),textX:s,textY:r,textFont:u,color:this.getColor(this.dataRangeOption.min),rect:l,x:a[0][0],y:a[0][1],_x:a[0][0],_y:a[0][1]}},this._endShape.highlightStyle={strokeColor:this._endShape.style.color,lineWidth:1},this._startShape.zlevel=this._endShape.zlevel=this.getZlevelBase(),this._startShape.z=this._endShape.z=this.getZBase()+1,this._startShape.draggable=this._endShape.draggable=!0,this._startShape.ondrift=this._endShape.ondrift=this._ondrift,this._startShape.ondragend=this._endShape.ondragend=this._ondragend,this._startShape.style.textColor=this._endShape.style.textColor=this.dataRangeOption.textStyle.color,this._startShape.style.textAlign=this._endShape.style.textAlign="center",this._startShape.style.textPosition=this._endShape.style.textPosition="specific",this._startShape.style.textBaseline=this._endShape.style.textBaseline="middle",this._startShape.style.width=this._endShape.style.width=0,this._startShape.style.height=this._endShape.style.height=0,this._startShape.style.textPosition=this._endShape.style.textPosition="specific",this._startShape=new o(this._startShape),this._endShape=new o(this._endShape),this.shapeList.push(this._startShape),this.shapeList.push(this._endShape)},_bulidMask:function(){var t=this._calculableLocation.x,e=this._calculableLocation.y,i=this._calculableLocation.width,n=this._calculableLocation.height;this._startMask={zlevel:this.getZlevelBase(),z:this.getZBase()+1,style:{x:t,y:e,width:"horizontal"==this.dataRangeOption.orient?0:i,height:"horizontal"==this.dataRangeOption.orient?n:0,color:"#ccc"},hoverable:!1},this._endMask={zlevel:this.getZlevelBase(),z:this.getZBase()+1,style:{x:"horizontal"==this.dataRangeOption.orient?t+i:t,y:"horizontal"==this.dataRangeOption.orient?e:e+n,width:"horizontal"==this.dataRangeOption.orient?0:i,height:"horizontal"==this.dataRangeOption.orient?n:0,color:"#ccc"},hoverable:!1},this._startMask=new a(this._startMask),this._endMask=new a(this._endMask),this.shapeList.push(this._startMask),this.shapeList.push(this._endMask)},_buildBackground:function(){var t=this.reformCssArray(this.dataRangeOption.padding);this.shapeList.push(new a({zlevel:this.getZlevelBase(),z:this.getZBase(),hoverable:!1,style:{x:this._itemGroupLocation.x-t[3],y:this._itemGroupLocation.y-t[0],width:this._itemGroupLocation.width+t[3]+t[1],height:this._itemGroupLocation.height+t[0]+t[2],brushType:0===this.dataRangeOption.borderWidth?"fill":"both",color:this.dataRangeOption.backgroundColor,strokeColor:this.dataRangeOption.borderColor,lineWidth:this.dataRangeOption.borderWidth}}))},_getItemGroupLocation:function(){var t=this._valueTextList,e=t.length,i=this.dataRangeOption.itemGap,n=this.dataRangeOption.itemWidth,a=this.dataRangeOption.itemHeight,o=0,s=0,r=this.getFont(this.dataRangeOption.textStyle),l=h.getTextHeight("国",r),d=10;if("horizontal"==this.dataRangeOption.orient){if(this.dataRangeOption.text||this.dataRangeOption.splitNumber<=0||this.dataRangeOption.calculable)o=(this.dataRangeOption.splitNumber<=0||this.dataRangeOption.calculable?n*d+i:e*(n+i))+(this.dataRangeOption.text&&"undefined"!=typeof this.dataRangeOption.text[0]?h.getTextWidth(this.dataRangeOption.text[0],r)+this._textGap:0)+(this.dataRangeOption.text&&"undefined"!=typeof this.dataRangeOption.text[1]?h.getTextWidth(this.dataRangeOption.text[1],r)+this._textGap:0);else{n+=5;for(var m=0;e>m;m++)o+=n+h.getTextWidth(t[m],r)+i}o-=i,s=Math.max(l,a)}else{var p;if(this.dataRangeOption.text||this.dataRangeOption.splitNumber<=0||this.dataRangeOption.calculable)s=(this.dataRangeOption.splitNumber<=0||this.dataRangeOption.calculable?a*d+i:e*(a+i))+(this.dataRangeOption.text&&"undefined"!=typeof this.dataRangeOption.text[0]?this._textGap+l:0)+(this.dataRangeOption.text&&"undefined"!=typeof this.dataRangeOption.text[1]?this._textGap+l:0),p=Math.max(h.getTextWidth(this.dataRangeOption.text&&this.dataRangeOption.text[0]||"",r),h.getTextWidth(this.dataRangeOption.text&&this.dataRangeOption.text[1]||"",r)),o=Math.max(n,p);else{s=(a+i)*e,n+=5,p=0;for(var m=0;e>m;m++)p=Math.max(p,h.getTextWidth(t[m],r));o=n+p}s-=i}var c,u=this.reformCssArray(this.dataRangeOption.padding),g=this.zr.getWidth();switch(this.dataRangeOption.x){case"center":c=Math.floor((g-o)/2);break;case"left":c=u[3]+this.dataRangeOption.borderWidth;break;case"right":c=g-o-u[1]-this.dataRangeOption.borderWidth;break;default:c=this.parsePercent(this.dataRangeOption.x,g),c=isNaN(c)?0:c}var y,V=this.zr.getHeight();switch(this.dataRangeOption.y){case"top":y=u[0]+this.dataRangeOption.borderWidth;break;case"bottom":y=V-s-u[2]-this.dataRangeOption.borderWidth;break;case"center":y=Math.floor((V-s)/2);break;default:y=this.parsePercent(this.dataRangeOption.y,V),y=isNaN(y)?0:y}if(this.dataRangeOption.calculable){var U=Math.max(h.getTextWidth(this.dataRangeOption.max,r),h.getTextWidth(this.dataRangeOption.min,r))+l;"horizontal"==this.dataRangeOption.orient?(U>c&&(c=U),c+o+U>g&&(c-=U)):(l>y&&(y=l),y+s+l>V&&(y-=l))}return{x:c,y:y,width:o,height:s}},_getTextShape:function(t,e,i){return{zlevel:this.getZlevelBase(),z:this.getZBase(),style:{x:"horizontal"==this.dataRangeOption.orient?t:this._itemGroupLocation.x+this._itemGroupLocation.width/2,y:"horizontal"==this.dataRangeOption.orient?this._itemGroupLocation.y+this._itemGroupLocation.height/2:e,color:this.dataRangeOption.textStyle.color,text:i,textFont:this.getFont(this.dataRangeOption.textStyle),textBaseline:"horizontal"==this.dataRangeOption.orient?"middle":"top",textAlign:"horizontal"==this.dataRangeOption.orient?"left":"center"},hoverable:!1}},_getItemShape:function(t,e,i,n,a){return{zlevel:this.getZlevelBase(),z:this.getZBase(),style:{x:t,y:e+1,width:i,height:n-2,color:a},highlightStyle:{strokeColor:a,lineWidth:1}}},__ondrift:function(t,e,i){var n=this._calculableLocation.x,a=this._calculableLocation.y,o=this._calculableLocation.width,s=this._calculableLocation.height;return"horizontal"==this.dataRangeOption.orient?t.style.x+e<=n?t.style.x=n:t.style.x+e+t.style.width>=n+o?t.style.x=n+o-t.style.width:t.style.x+=e:t.style.y+i<=a?t.style.y=a:t.style.y+i+t.style.height>=a+s?t.style.y=a+s-t.style.height:t.style.y+=i,"filler"==t._type?this._syncHandleShape():this._syncFillerShape(t),this.dataRangeOption.realtime&&this._syncData(),!0},__ondragend:function(){this.isDragend=!0},ondragend:function(t,e){this.isDragend&&t.target&&(!this.dataRangeOption.realtime&&this._syncData(),e.dragOut=!0,e.dragIn=!0,this.dataRangeOption.realtime||this.messageCenter.dispatch(s.EVENT.DATA_RANGE,null,{range:{start:this._range.end,end:this._range.start}},this.myChart),e.needRefresh=!1,this.isDragend=!1)},_syncShapeFromRange:function(){var t=this.dataRangeOption.range||{};if(this._range.end="undefined"!=typeof this._range.end?this._range.end:"undefined"!=typeof t.start?t.start:0,this._range.start="undefined"!=typeof this._range.start?this._range.start:"undefined"!=typeof t.end?t.end:100,100!=this._range.start||0!==this._range.end){if("horizontal"==this.dataRangeOption.orient){var e=this._fillerShape.style.width;this._fillerShape.style.x+=e*(100-this._range.start)/100,this._fillerShape.style.width=e*(this._range.start-this._range.end)/100}else{var i=this._fillerShape.style.height;this._fillerShape.style.y+=i*(100-this._range.start)/100,this._fillerShape.style.height=i*(this._range.start-this._range.end)/100}this.zr.modShape(this._fillerShape.id),this._syncHandleShape()}},_syncHandleShape:function(){var t=this._calculableLocation.x,e=this._calculableLocation.y,i=this._calculableLocation.width,n=this._calculableLocation.height;"horizontal"==this.dataRangeOption.orient?(this._startShape.style.x=this._fillerShape.style.x,this._startMask.style.width=this._startShape.style.x-t,this._endShape.style.x=this._fillerShape.style.x+this._fillerShape.style.width,this._endMask.style.x=this._endShape.style.x,this._endMask.style.width=t+i-this._endShape.style.x,this._range.start=Math.ceil(100-(this._startShape.style.x-t)/i*100),this._range.end=Math.floor(100-(this._endShape.style.x-t)/i*100)):(this._startShape.style.y=this._fillerShape.style.y,this._startMask.style.height=this._startShape.style.y-e,this._endShape.style.y=this._fillerShape.style.y+this._fillerShape.style.height,this._endMask.style.y=this._endShape.style.y,this._endMask.style.height=e+n-this._endShape.style.y,this._range.start=Math.ceil(100-(this._startShape.style.y-e)/n*100),this._range.end=Math.floor(100-(this._endShape.style.y-e)/n*100)),this._syncShape()},_syncFillerShape:function(t){var e,i,n=this._calculableLocation.x,a=this._calculableLocation.y,o=this._calculableLocation.width,s=this._calculableLocation.height;"horizontal"==this.dataRangeOption.orient?(e=this._startShape.style.x,i=this._endShape.style.x,t.id==this._startShape.id&&e>=i?(i=e,this._endShape.style.x=e):t.id==this._endShape.id&&e>=i&&(e=i,this._startShape.style.x=e),this._fillerShape.style.x=e,this._fillerShape.style.width=i-e,this._startMask.style.width=e-n,this._endMask.style.x=i,this._endMask.style.width=n+o-i,this._range.start=Math.ceil(100-(e-n)/o*100),this._range.end=Math.floor(100-(i-n)/o*100)):(e=this._startShape.style.y,i=this._endShape.style.y,t.id==this._startShape.id&&e>=i?(i=e,this._endShape.style.y=e):t.id==this._endShape.id&&e>=i&&(e=i,this._startShape.style.y=e),this._fillerShape.style.y=e,this._fillerShape.style.height=i-e,this._startMask.style.height=e-a,this._endMask.style.y=i,this._endMask.style.height=a+s-i,this._range.start=Math.ceil(100-(e-a)/s*100),this._range.end=Math.floor(100-(i-a)/s*100)),this._syncShape()},_syncShape:function(){this._startShape.position=[this._startShape.style.x-this._startShape.style._x,this._startShape.style.y-this._startShape.style._y],this._startShape.style.text=this._textFormat(this._gap*this._range.start+this.dataRangeOption.min),this._startShape.style.color=this._startShape.highlightStyle.strokeColor=this.getColor(this._gap*this._range.start+this.dataRangeOption.min),this._endShape.position=[this._endShape.style.x-this._endShape.style._x,this._endShape.style.y-this._endShape.style._y],this._endShape.style.text=this._textFormat(this._gap*this._range.end+this.dataRangeOption.min),this._endShape.style.color=this._endShape.highlightStyle.strokeColor=this.getColor(this._gap*this._range.end+this.dataRangeOption.min),this.zr.modShape(this._startShape.id),this.zr.modShape(this._endShape.id),this.zr.modShape(this._startMask.id),this.zr.modShape(this._endMask.id),this.zr.modShape(this._fillerShape.id),this.zr.refresh()},_syncData:function(){this.dataRangeOption.realtime&&this.messageCenter.dispatch(s.EVENT.DATA_RANGE,null,{range:{start:this._range.end,end:this._range.start}},this.myChart)},__dataRangeSelected:function(t){if("single"===this.dataRangeOption.selectedMode)for(var e in this._selectedMap)this._selectedMap[e]=!1;var i=t.target._idx;this._selectedMap[i]=!this._selectedMap[i];var n=(this._colorList.length-i)*this._gap+this.dataRangeOption.min;this.messageCenter.dispatch(s.EVENT.DATA_RANGE_SELECTED,t.event,{selected:this._selectedMap,target:i,valueMax:n,valueMin:n-this._gap},this.myChart),this.messageCenter.dispatch(s.EVENT.REFRESH,null,null,this.myChart)},__dispatchHoverLink:function(t){var e,i;if(this.dataRangeOption.calculable){var n,a=this.dataRangeOption.max-this.dataRangeOption.min;n="horizontal"==this.dataRangeOption.orient?(1-(l.getX(t.event)-this._calculableLocation.x)/this._calculableLocation.width)*a:(1-(l.getY(t.event)-this._calculableLocation.y)/this._calculableLocation.height)*a,e=n-.05*a,i=n+.05*a}else{var o=t.target._idx;i=(this._colorList.length-o)*this._gap+this.dataRangeOption.min,e=i-this._gap}this.messageCenter.dispatch(s.EVENT.DATA_RANGE_HOVERLINK,t.event,{valueMin:e,valueMax:i},this.myChart)},__onhoverlink:function(t){if(this.dataRangeOption.show&&this.dataRangeOption.hoverLink&&this._indicatorShape&&t&&null!=t.seriesIndex&&null!=t.dataIndex){var e=t.value;if(""==e||isNaN(e))return;e<this.dataRangeOption.min?e=this.dataRangeOption.min:e>this.dataRangeOption.max&&(e=this.dataRangeOption.max),this._indicatorShape.position="horizontal"==this.dataRangeOption.orient?[(this.dataRangeOption.max-e)/(this.dataRangeOption.max-this.dataRangeOption.min)*this._calculableLocation.width,0]:[0,(this.dataRangeOption.max-e)/(this.dataRangeOption.max-this.dataRangeOption.min)*this._calculableLocation.height],this._indicatorShape.style.text=this._textFormat(t.value),this._indicatorShape.style.color=this.getColor(e),this.zr.addHoverShape(this._indicatorShape)}},_textFormat:function(t,e){if(t=t.toFixed(this.dataRangeOption.precision),e=null!=e?e.toFixed(this.dataRangeOption.precision):"",this.dataRangeOption.formatter){if("string"==typeof this.dataRangeOption.formatter)return this.dataRangeOption.formatter.replace("{value}",t).replace("{value2}",e);if("function"==typeof this.dataRangeOption.formatter)return this.dataRangeOption.formatter.call(this.myChart,t,e)}return""!==e?t+" - "+e:t},refresh:function(t){if(t){this.option=t,this.option.dataRange=this.reformOption(this.option.dataRange),this.dataRangeOption=this.option.dataRange,this.myChart.canvasSupported||(this.dataRangeOption.realtime=!1);var e=this.dataRangeOption.splitNumber<=0||this.dataRangeOption.calculable?100:this.dataRangeOption.splitNumber;if(this._colorList=d.getGradientColors(this.dataRangeOption.color,Math.max((e-this.dataRangeOption.color.length)/(this.dataRangeOption.color.length-1),0)+1),this._colorList.length>e){for(var i=this._colorList.length,n=[this._colorList[0]],a=i/(e-1),o=1;e-1>o;o++)n.push(this._colorList[Math.floor(o*a)]);n.push(this._colorList[i-1]),this._colorList=n}var s=this.dataRangeOption.precision;for(this._gap=(this.dataRangeOption.max-this.dataRangeOption.min)/e;this._gap.toFixed(s)-0!=this._gap&&5>s;)s++;this.dataRangeOption.precision=s,this._gap=((this.dataRangeOption.max-this.dataRangeOption.min)/e).toFixed(s)-0,this._valueTextList=[];for(var o=0;e>o;o++)this._selectedMap[o]=!0,this._valueTextList.unshift(this._textFormat(o*this._gap+this.dataRangeOption.min,(o+1)*this._gap+this.dataRangeOption.min))}this.clear(),this._buildShape()},getColor:function(t){if(isNaN(t))return null;if(this.dataRangeOption.min==this.dataRangeOption.max)return this._colorList[0];if(t<this.dataRangeOption.min?t=this.dataRangeOption.min:t>this.dataRangeOption.max&&(t=this.dataRangeOption.max),this.dataRangeOption.calculable&&(t-(this._gap*this._range.start+this.dataRangeOption.min)>5e-5||t-(this._gap*this._range.end+this.dataRangeOption.min)<-5e-5))return null;var e=this._colorList.length-Math.ceil((t-this.dataRangeOption.min)/(this.dataRangeOption.max-this.dataRangeOption.min)*this._colorList.length);return e==this._colorList.length&&e--,this._selectedMap[e]?this._colorList[e]:null},getColorByIndex:function(t){return t>=this._colorList.length?t=this._colorList.length-1:0>t&&(t=0),this._colorList[t]},onbeforDispose:function(){this.messageCenter.unbind(s.EVENT.HOVER,this._onhoverlink)}},r.inherits(e,i),t("../component").define("dataRange",e),e}),define("echarts/component/categoryAxis",["require","./base","zrender/shape/Text","zrender/shape/Line","zrender/shape/Rectangle","../config","zrender/tool/util","zrender/tool/area","../component"],function(t){function e(t,e,n,a,o,s){if(a.data.length<1)return void console.error("option.data.length < 1.");i.call(this,t,e,n,a,o),this.grid=this.component.grid;for(var r in s)this[r]=s[r];this.refresh(a)}var i=t("./base"),n=t("zrender/shape/Text"),a=t("zrender/shape/Line"),o=t("zrender/shape/Rectangle"),s=t("../config"),r=t("zrender/tool/util"),l=t("zrender/tool/area");return e.prototype={type:s.COMPONENT_TYPE_AXIS_CATEGORY,_getReformedLabel:function(t){var e=this.getDataFromOption(this.option.data[t]),i=this.option.data[t].formatter||this.option.axisLabel.formatter;return i&&("function"==typeof i?e=i.call(this.myChart,e):"string"==typeof i&&(e=i.replace("{value}",e))),e},_getInterval:function(){var t=this.option.axisLabel.interval;if("auto"==t){var e=this.option.axisLabel.textStyle.fontSize,i=this.option.data,n=this.option.data.length;if(this.isHorizontal())if(n>3){var a,o,s=this.getGap(),h=!1,d=Math.floor(.5/s);for(d=1>d?1:d,t=Math.floor(15/s);!h&&n>t;){t+=d,h=!0,a=Math.floor(s*t);for(var m=Math.floor((n-1)/t)*t;m>=0;m-=t){if(0!==this.option.axisLabel.rotate)o=e;else if(i[m].textStyle)o=l.getTextWidth(this._getReformedLabel(m),this.getFont(r.merge(i[m].textStyle,this.option.axisLabel.textStyle)));else{var p=this._getReformedLabel(m)+"",c=(p.match(/\w/g)||"").length,u=p.length-c;o=c*e*2/3+u*e}if(o>a){h=!1;break}}}}else t=1;else if(n>3){var s=this.getGap();for(t=Math.floor(11/s);e>s*t-6&&n>t;)t++}else t=1}else t="function"==typeof t?1:t-0+1;return t},_buildShape:function(){if(this._interval=this._getInterval(),this.option.show){this.option.splitArea.show&&this._buildSplitArea(),this.option.splitLine.show&&this._buildSplitLine(),this.option.axisLine.show&&this._buildAxisLine(),this.option.axisTick.show&&this._buildAxisTick(),this.option.axisLabel.show&&this._buildAxisLabel();for(var t=0,e=this.shapeList.length;e>t;t++)this.zr.addShape(this.shapeList[t])}},_buildAxisTick:function(){var t,e=this.option.data,i=this.option.data.length,n=this.option.axisTick,o=n.length,s=n.lineStyle.color,r=n.lineStyle.width,l="function"==typeof n.interval?n.interval:"auto"==n.interval&&"function"==typeof this.option.axisLabel.interval?this.option.axisLabel.interval:!1,h=l?1:"auto"==n.interval?this._interval:n.interval-0+1,d=n.onGap,m=d?this.getGap()/2:"undefined"==typeof d&&this.option.boundaryGap?this.getGap()/2:0,p=m>0?-h:0;if(this.isHorizontal())for(var c,u="bottom"==this.option.position?n.inside?this.grid.getYend()-o-1:this.grid.getYend()+1:n.inside?this.grid.getY()+1:this.grid.getY()-o-1,g=p;i>g;g+=h)(!l||l(g,e[g]))&&(c=this.subPixelOptimize(this.getCoordByIndex(g)+(g>=0?m:0),r),t={_axisShape:"axisTick",zlevel:this.getZlevelBase(),z:this.getZBase(),hoverable:!1,style:{xStart:c,yStart:u,xEnd:c,yEnd:u+o,strokeColor:s,lineWidth:r}},this.shapeList.push(new a(t)));else for(var y,V="left"==this.option.position?n.inside?this.grid.getX()+1:this.grid.getX()-o-1:n.inside?this.grid.getXend()-o-1:this.grid.getXend()+1,g=p;i>g;g+=h)(!l||l(g,e[g]))&&(y=this.subPixelOptimize(this.getCoordByIndex(g)-(g>=0?m:0),r),t={_axisShape:"axisTick",zlevel:this.getZlevelBase(),z:this.getZBase(),hoverable:!1,style:{xStart:V,yStart:y,xEnd:V+o,yEnd:y,strokeColor:s,lineWidth:r}},this.shapeList.push(new a(t)))},_buildAxisLabel:function(){var t,e,i=this.option.data,a=this.option.data.length,o=this.option.axisLabel,s=o.rotate,l=o.margin,h=o.clickable,d=o.textStyle,m="function"==typeof o.interval?o.interval:!1;if(this.isHorizontal()){var p,c;"bottom"==this.option.position?(p=this.grid.getYend()+l,c="top"):(p=this.grid.getY()-l,c="bottom");for(var u=0;a>u;u+=this._interval)m&&!m(u,i[u])||""===this._getReformedLabel(u)||(e=r.merge(i[u].textStyle||{},d),t={zlevel:this.getZlevelBase(),z:this.getZBase()+3,hoverable:!1,style:{x:this.getCoordByIndex(u),y:p,color:e.color,text:this._getReformedLabel(u),textFont:this.getFont(e),textAlign:e.align||"center",textBaseline:e.baseline||c}},s&&(t.style.textAlign=s>0?"bottom"==this.option.position?"right":"left":"bottom"==this.option.position?"left":"right",t.rotation=[s*Math.PI/180,t.style.x,t.style.y]),this.shapeList.push(new n(this._axisLabelClickable(h,t))))}else{var g,y;"left"==this.option.position?(g=this.grid.getX()-l,y="right"):(g=this.grid.getXend()+l,y="left");for(var u=0;a>u;u+=this._interval)m&&!m(u,i[u])||""===this._getReformedLabel(u)||(e=r.merge(i[u].textStyle||{},d),t={zlevel:this.getZlevelBase(),z:this.getZBase()+3,hoverable:!1,style:{x:g,y:this.getCoordByIndex(u),color:e.color,text:this._getReformedLabel(u),textFont:this.getFont(e),textAlign:e.align||y,textBaseline:e.baseline||0===u&&""!==this.option.name?"bottom":u==a-1&&""!==this.option.name?"top":"middle"}},s&&(t.rotation=[s*Math.PI/180,t.style.x,t.style.y]),this.shapeList.push(new n(this._axisLabelClickable(h,t))))}},_buildSplitLine:function(){var t,e=this.option.data,i=this.option.data.length,n=this.option.splitLine,o=n.lineStyle.type,s=n.lineStyle.width,r=n.lineStyle.color;r=r instanceof Array?r:[r];var l=r.length,h="function"==typeof this.option.axisLabel.interval?this.option.axisLabel.interval:!1,d=n.onGap,m=d?this.getGap()/2:"undefined"==typeof d&&this.option.boundaryGap?this.getGap()/2:0;if(i-=d||"undefined"==typeof d&&this.option.boundaryGap?1:0,this.isHorizontal())for(var p,c=this.grid.getY(),u=this.grid.getYend(),g=0;i>g;g+=this._interval)(!h||h(g,e[g]))&&(p=this.subPixelOptimize(this.getCoordByIndex(g)+m,s),t={zlevel:this.getZlevelBase(),z:this.getZBase(),hoverable:!1,style:{xStart:p,yStart:c,xEnd:p,yEnd:u,strokeColor:r[g/this._interval%l],lineType:o,lineWidth:s}},this.shapeList.push(new a(t)));else for(var y,V=this.grid.getX(),U=this.grid.getXend(),g=0;i>g;g+=this._interval)(!h||h(g,e[g]))&&(y=this.subPixelOptimize(this.getCoordByIndex(g)-m,s),t={zlevel:this.getZlevelBase(),z:this.getZBase(),hoverable:!1,style:{xStart:V,yStart:y,xEnd:U,yEnd:y,strokeColor:r[g/this._interval%l],lineType:o,lineWidth:s}},this.shapeList.push(new a(t)))},_buildSplitArea:function(){var t,e=this.option.data,i=this.option.splitArea,n=i.areaStyle.color;if(n instanceof Array){var a=n.length,s=this.option.data.length,r="function"==typeof this.option.axisLabel.interval?this.option.axisLabel.interval:!1,l=i.onGap,h=l?this.getGap()/2:"undefined"==typeof l&&this.option.boundaryGap?this.getGap()/2:0;if(this.isHorizontal())for(var d,m=this.grid.getY(),p=this.grid.getHeight(),c=this.grid.getX(),u=0;s>=u;u+=this._interval)r&&!r(u,e[u])&&s>u||(d=s>u?this.getCoordByIndex(u)+h:this.grid.getXend(),t={zlevel:this.getZlevelBase(),z:this.getZBase(),hoverable:!1,style:{x:c,y:m,width:d-c,height:p,color:n[u/this._interval%a]}},this.shapeList.push(new o(t)),c=d);else for(var g,y=this.grid.getX(),V=this.grid.getWidth(),U=this.grid.getYend(),u=0;s>=u;u+=this._interval)r&&!r(u,e[u])&&s>u||(g=s>u?this.getCoordByIndex(u)-h:this.grid.getY(),t={zlevel:this.getZlevelBase(),z:this.getZBase(),hoverable:!1,style:{x:y,y:g,width:V,height:U-g,color:n[u/this._interval%a]}},this.shapeList.push(new o(t)),U=g)}else t={zlevel:this.getZlevelBase(),z:this.getZBase(),hoverable:!1,style:{x:this.grid.getX(),y:this.grid.getY(),width:this.grid.getWidth(),height:this.grid.getHeight(),color:n}},this.shapeList.push(new o(t))},refresh:function(t){t&&(this.option=this.reformOption(t),this.option.axisLabel.textStyle=r.merge(this.option.axisLabel.textStyle||{},this.ecTheme.textStyle)),this.clear(),this._buildShape()},getGap:function(){var t=this.option.data.length,e=this.isHorizontal()?this.grid.getWidth():this.grid.getHeight();return this.option.boundaryGap?e/t:e/(t>1?t-1:1)},getCoord:function(t){for(var e=this.option.data,i=e.length,n=this.getGap(),a=this.option.boundaryGap?n/2:0,o=0;i>o;o++){if(this.getDataFromOption(e[o])==t)return a=this.isHorizontal()?this.grid.getX()+a:this.grid.getYend()-a;a+=n}},getCoordByIndex:function(t){if(0>t)return this.isHorizontal()?this.grid.getX():this.grid.getYend();if(t>this.option.data.length-1)return this.isHorizontal()?this.grid.getXend():this.grid.getY();var e=this.getGap(),i=this.option.boundaryGap?e/2:0;return i+=t*e,i=this.isHorizontal()?this.grid.getX()+i:this.grid.getYend()-i},getNameByIndex:function(t){return this.getDataFromOption(this.option.data[t])},getIndexByName:function(t){for(var e=this.option.data,i=e.length,n=0;i>n;n++)if(this.getDataFromOption(e[n])==t)return n;return-1},getValueFromCoord:function(){return""},isMainAxis:function(t){return t%this._interval===0}},r.inherits(e,i),t("../component").define("categoryAxis",e),e}),define("echarts/component/valueAxis",["require","./base","zrender/shape/Text","zrender/shape/Line","zrender/shape/Rectangle","../config","../util/date","zrender/tool/util","../util/smartSteps","../util/accMath","../component"],function(t){function e(t,e,n,a,o,s,r){if(!r||0===r.length)return void console.err("option.series.length == 0.");i.call(this,t,e,n,a,o),this.series=r,this.grid=this.component.grid;for(var l in s)this[l]=s[l];this.refresh(a,r)}var i=t("./base"),n=t("zrender/shape/Text"),a=t("zrender/shape/Line"),o=t("zrender/shape/Rectangle"),s=t("../config"),r=t("../util/date"),l=t("zrender/tool/util");return e.prototype={type:s.COMPONENT_TYPE_AXIS_VALUE,_buildShape:function(){if(this._hasData=!1,this._calculateValue(),this._hasData&&this.option.show){this.option.splitArea.show&&this._buildSplitArea(),this.option.splitLine.show&&this._buildSplitLine(),this.option.axisLine.show&&this._buildAxisLine(),this.option.axisTick.show&&this._buildAxisTick(),this.option.axisLabel.show&&this._buildAxisLabel();for(var t=0,e=this.shapeList.length;e>t;t++)this.zr.addShape(this.shapeList[t])}},_buildAxisTick:function(){var t,e=this._valueList,i=this._valueList.length,n=this.option.axisTick,o=n.length,s=n.lineStyle.color,r=n.lineStyle.width;if(this.isHorizontal())for(var l,h="bottom"===this.option.position?n.inside?this.grid.getYend()-o-1:this.grid.getYend()+1:n.inside?this.grid.getY()+1:this.grid.getY()-o-1,d=0;i>d;d++)l=this.subPixelOptimize(this.getCoord(e[d]),r),t={_axisShape:"axisTick",zlevel:this.getZlevelBase(),z:this.getZBase(),hoverable:!1,style:{xStart:l,yStart:h,xEnd:l,yEnd:h+o,strokeColor:s,lineWidth:r}},this.shapeList.push(new a(t));
else for(var m,p="left"===this.option.position?n.inside?this.grid.getX()+1:this.grid.getX()-o-1:n.inside?this.grid.getXend()-o-1:this.grid.getXend()+1,d=0;i>d;d++)m=this.subPixelOptimize(this.getCoord(e[d]),r),t={_axisShape:"axisTick",zlevel:this.getZlevelBase(),z:this.getZBase(),hoverable:!1,style:{xStart:p,yStart:m,xEnd:p+o,yEnd:m,strokeColor:s,lineWidth:r}},this.shapeList.push(new a(t))},_buildAxisLabel:function(){var t,e=this._valueList,i=this._valueList.length,a=this.option.axisLabel.rotate,o=this.option.axisLabel.margin,s=this.option.axisLabel.clickable,r=this.option.axisLabel.textStyle;if(this.isHorizontal()){var l,h;"bottom"===this.option.position?(l=this.grid.getYend()+o,h="top"):(l=this.grid.getY()-o,h="bottom");for(var d=0;i>d;d++)t={zlevel:this.getZlevelBase(),z:this.getZBase()+3,hoverable:!1,style:{x:this.getCoord(e[d]),y:l,color:"function"==typeof r.color?r.color(e[d]):r.color,text:this._valueLabel[d],textFont:this.getFont(r),textAlign:r.align||"center",textBaseline:r.baseline||h}},a&&(t.style.textAlign=a>0?"bottom"===this.option.position?"right":"left":"bottom"===this.option.position?"left":"right",t.rotation=[a*Math.PI/180,t.style.x,t.style.y]),this.shapeList.push(new n(this._axisLabelClickable(s,t)))}else{var m,p;"left"===this.option.position?(m=this.grid.getX()-o,p="right"):(m=this.grid.getXend()+o,p="left");for(var d=0;i>d;d++)t={zlevel:this.getZlevelBase(),z:this.getZBase()+3,hoverable:!1,style:{x:m,y:this.getCoord(e[d]),color:"function"==typeof r.color?r.color(e[d]):r.color,text:this._valueLabel[d],textFont:this.getFont(r),textAlign:r.align||p,textBaseline:r.baseline||(0===d&&""!==this.option.name?"bottom":d===i-1&&""!==this.option.name?"top":"middle")}},a&&(t.rotation=[a*Math.PI/180,t.style.x,t.style.y]),this.shapeList.push(new n(this._axisLabelClickable(s,t)))}},_buildSplitLine:function(){var t,e=this._valueList,i=this._valueList.length,n=this.option.splitLine,o=n.lineStyle.type,s=n.lineStyle.width,r=n.lineStyle.color;r=r instanceof Array?r:[r];var l=r.length;if(this.isHorizontal())for(var h,d=this.grid.getY(),m=this.grid.getYend(),p=0;i>p;p++)h=this.subPixelOptimize(this.getCoord(e[p]),s),t={zlevel:this.getZlevelBase(),z:this.getZBase(),hoverable:!1,style:{xStart:h,yStart:d,xEnd:h,yEnd:m,strokeColor:r[p%l],lineType:o,lineWidth:s}},this.shapeList.push(new a(t));else for(var c,u=this.grid.getX(),g=this.grid.getXend(),p=0;i>p;p++)c=this.subPixelOptimize(this.getCoord(e[p]),s),t={zlevel:this.getZlevelBase(),z:this.getZBase(),hoverable:!1,style:{xStart:u,yStart:c,xEnd:g,yEnd:c,strokeColor:r[p%l],lineType:o,lineWidth:s}},this.shapeList.push(new a(t))},_buildSplitArea:function(){var t,e=this.option.splitArea.areaStyle.color;if(e instanceof Array){var i=e.length,n=this._valueList,a=this._valueList.length;if(this.isHorizontal())for(var s,r=this.grid.getY(),l=this.grid.getHeight(),h=this.grid.getX(),d=0;a>=d;d++)s=a>d?this.getCoord(n[d]):this.grid.getXend(),t={zlevel:this.getZlevelBase(),z:this.getZBase(),hoverable:!1,style:{x:h,y:r,width:s-h,height:l,color:e[d%i]}},this.shapeList.push(new o(t)),h=s;else for(var m,p=this.grid.getX(),c=this.grid.getWidth(),u=this.grid.getYend(),d=0;a>=d;d++)m=a>d?this.getCoord(n[d]):this.grid.getY(),t={zlevel:this.getZlevelBase(),z:this.getZBase(),hoverable:!1,style:{x:p,y:m,width:c,height:u-m,color:e[d%i]}},this.shapeList.push(new o(t)),u=m}else t={zlevel:this.getZlevelBase(),z:this.getZBase(),hoverable:!1,style:{x:this.grid.getX(),y:this.grid.getY(),width:this.grid.getWidth(),height:this.grid.getHeight(),color:e}},this.shapeList.push(new o(t))},_calculateValue:function(){if(isNaN(this.option.min-0)||isNaN(this.option.max-0)){for(var t,e,i={},n=this.component.legend,a=0,o=this.series.length;o>a;a++)!(this.series[a].type!=s.CHART_TYPE_LINE&&this.series[a].type!=s.CHART_TYPE_BAR&&this.series[a].type!=s.CHART_TYPE_SCATTER&&this.series[a].type!=s.CHART_TYPE_K&&this.series[a].type!=s.CHART_TYPE_EVENTRIVER||n&&!n.isSelected(this.series[a].name)||(t=this.series[a].xAxisIndex||0,e=this.series[a].yAxisIndex||0,this.option.xAxisIndex!=t&&this.option.yAxisIndex!=e||!this._calculSum(i,a)));var r;for(var a in i){r=i[a];for(var l=0,h=r.length;h>l;l++)if(!isNaN(r[l])){this._hasData=!0,this._min=r[l],this._max=r[l];break}if(this._hasData)break}for(var a in i){r=i[a];for(var l=0,h=r.length;h>l;l++)isNaN(r[l])||(this._min=Math.min(this._min,r[l]),this._max=Math.max(this._max,r[l]))}var d=Math.abs(this._max-this._min);this._min=isNaN(this.option.min-0)?this._min-Math.abs(d*this.option.boundaryGap[0]):this.option.min-0,this._max=isNaN(this.option.max-0)?this._max+Math.abs(d*this.option.boundaryGap[1]):this.option.max-0,this._min===this._max&&(0===this._max?this._max=1:this._max>0?this._min=this._max/this.option.splitNumber!=null?this.option.splitNumber:5:this._max=this._max/this.option.splitNumber!=null?this.option.splitNumber:5),"time"!=this.option.type?this._reformValue(this.option.scale):this._reformTimeValue()}else this._hasData=!0,this._min=this.option.min-0,this._max=this.option.max-0,"time"!=this.option.type?this._customerValue():this._reformTimeValue()},_calculSum:function(t,e){var i,n,a=this.series[e].name||"kener";if(this.series[e].stack){var o="__Magic_Key_Positive__"+this.series[e].stack,l="__Magic_Key_Negative__"+this.series[e].stack;t[o]=t[o]||[],t[l]=t[l]||[],t[a]=t[a]||[],n=this.series[e].data;for(var h=0,d=n.length;d>h;h++)i=this.getDataFromOption(n[h]),"-"!==i&&(i-=0,i>=0?null!=t[o][h]?t[o][h]+=i:t[o][h]=i:null!=t[l][h]?t[l][h]+=i:t[l][h]=i,this.option.scale&&t[a].push(i))}else if(t[a]=t[a]||[],this.series[e].type!=s.CHART_TYPE_EVENTRIVER){n=this.series[e].data;for(var h=0,d=n.length;d>h;h++)i=this.getDataFromOption(n[h]),this.series[e].type===s.CHART_TYPE_K?(t[a].push(i[0]),t[a].push(i[1]),t[a].push(i[2]),t[a].push(i[3])):i instanceof Array?(-1!=this.option.xAxisIndex&&t[a].push("time"!=this.option.type?i[0]:r.getNewDate(i[0])),-1!=this.option.yAxisIndex&&t[a].push("time"!=this.option.type?i[1]:r.getNewDate(i[1]))):t[a].push(i)}else{n=this.series[e].eventList;for(var h=0,d=n.length;d>h;h++)for(var m=n[h].evolution,p=0,c=m.length;c>p;p++)t[a].push(r.getNewDate(m[p].time))}},_reformValue:function(e){var i=t("../util/smartSteps"),n=this.option.splitNumber;!e&&this._min>=0&&this._max>=0&&(this._min=0),!e&&this._min<=0&&this._max<=0&&(this._max=0);var a=i(this._min,this._max,n);n=null!=n?n:a.secs,this._min=a.min,this._max=a.max,this._valueList=a.pnts,this._reformLabelData()},_reformTimeValue:function(){var t=null!=this.option.splitNumber?this.option.splitNumber:5,e=r.getAutoFormatter(this._min,this._max,t),i=e.formatter,n=e.gapValue;this._valueList=[r.getNewDate(this._min)];var a;switch(i){case"week":a=r.nextMonday(this._min);break;case"month":a=r.nextNthOnMonth(this._min,1);break;case"quarter":a=r.nextNthOnQuarterYear(this._min,1);break;case"half-year":a=r.nextNthOnHalfYear(this._min,1);break;case"year":a=r.nextNthOnYear(this._min,1);break;default:72e5>=n?a=(Math.floor(this._min/n)+1)*n:(a=r.getNewDate(this._min- -n),a.setHours(6*Math.round(a.getHours()/6)),a.setMinutes(0),a.setSeconds(0))}for(a-this._min<n/2&&(a-=-n),e=r.getNewDate(a),t*=1.5;t-->=0&&(("month"==i||"quarter"==i||"half-year"==i||"year"==i)&&e.setDate(1),!(this._max-e<n/2));)this._valueList.push(e),e=r.getNewDate(e- -n);this._valueList.push(r.getNewDate(this._max)),this._reformLabelData(i)},_customerValue:function(){var e=t("../util/accMath"),i=null!=this.option.splitNumber?this.option.splitNumber:5,n=(this._max-this._min)/i;this._valueList=[];for(var a=0;i>=a;a++)this._valueList.push(e.accAdd(this._min,e.accMul(n,a)));this._reformLabelData()},_reformLabelData:function(t){this._valueLabel=[];var e=this.option.axisLabel.formatter;if(e)for(var i=0,n=this._valueList.length;n>i;i++)"function"==typeof e?this._valueLabel.push(t?e.call(this.myChart,this._valueList[i],t):e.call(this.myChart,this._valueList[i])):"string"==typeof e&&this._valueLabel.push(t?r.format(e,this._valueList[i]):e.replace("{value}",this._valueList[i]));else if(t)for(var i=0,n=this._valueList.length;n>i;i++)this._valueLabel.push(r.format(t,this._valueList[i]));else for(var i=0,n=this._valueList.length;n>i;i++)this._valueLabel.push(this.numAddCommas(this._valueList[i]))},getExtremum:function(){return this._calculateValue(),{min:this._min,max:this._max}},refresh:function(t,e){t&&(this.option=this.reformOption(t),this.option.axisLabel.textStyle=l.merge(this.option.axisLabel.textStyle||{},this.ecTheme.textStyle),this.series=e),this.zr&&(this.clear(),this._buildShape())},getCoord:function(t){t=t<this._min?this._min:t,t=t>this._max?this._max:t;var e;return e=this.isHorizontal()?this.grid.getX()+(t-this._min)/(this._max-this._min)*this.grid.getWidth():this.grid.getYend()-(t-this._min)/(this._max-this._min)*this.grid.getHeight()},getCoordSize:function(t){return Math.abs(this.isHorizontal()?t/(this._max-this._min)*this.grid.getWidth():t/(this._max-this._min)*this.grid.getHeight())},getValueFromCoord:function(t){var e;return this.isHorizontal()?(t=t<this.grid.getX()?this.grid.getX():t,t=t>this.grid.getXend()?this.grid.getXend():t,e=this._min+(t-this.grid.getX())/this.grid.getWidth()*(this._max-this._min)):(t=t<this.grid.getY()?this.grid.getY():t,t=t>this.grid.getYend()?this.grid.getYend():t,e=this._max-(t-this.grid.getY())/this.grid.getHeight()*(this._max-this._min)),e.toFixed(2)-0},isMaindAxis:function(t){for(var e=0,i=this._valueList.length;i>e;e++)if(this._valueList[e]===t)return!0;return!1}},l.inherits(e,i),t("../component").define("valueAxis",e),e}),define("echarts/util/date",[],function(){function t(t,e,i){i=i>1?i:2;for(var n,a,o,s,r=0,l=d.length;l>r;r++)if(n=d[r].value,a=Math.ceil(e/n)*n-Math.floor(t/n)*n,Math.round(a/n)<=1.2*i){o=d[r].formatter,s=d[r].value;break}return null==o&&(o="year",n=317088e5,a=Math.ceil(e/n)*n-Math.floor(t/n)*n,s=Math.round(a/(i-1)/n)*n),{formatter:o,gapValue:s}}function e(t){return 10>t?"0"+t:t}function i(t,i){("week"==t||"month"==t||"quarter"==t||"half-year"==t||"year"==t)&&(t="MM - dd\nyyyy");var n=h(i),a=n.getFullYear(),o=n.getMonth()+1,s=n.getDate(),r=n.getHours(),l=n.getMinutes(),d=n.getSeconds();return t=t.replace("MM",e(o)),t=t.toLowerCase(),t=t.replace("yyyy",a),t=t.replace("yy",a%100),t=t.replace("dd",e(s)),t=t.replace("d",s),t=t.replace("hh",e(r)),t=t.replace("h",r),t=t.replace("mm",e(l)),t=t.replace("m",l),t=t.replace("ss",e(d)),t=t.replace("s",d)}function n(t){return t=h(t),t.setDate(t.getDate()+8-t.getDay()),t}function a(t,e,i){return t=h(t),t.setMonth(Math.ceil((t.getMonth()+1)/i)*i),t.setDate(e),t}function o(t,e){return a(t,e,1)}function s(t,e){return a(t,e,3)}function r(t,e){return a(t,e,6)}function l(t,e){return a(t,e,12)}function h(t){return t instanceof Date?t:new Date("string"==typeof t?t.replace(/-/g,"/"):t)}var d=[{formatter:"hh : mm : ss",value:1e3},{formatter:"hh : mm : ss",value:5e3},{formatter:"hh : mm : ss",value:1e4},{formatter:"hh : mm : ss",value:15e3},{formatter:"hh : mm : ss",value:3e4},{formatter:"hh : mm\nMM - dd",value:6e4},{formatter:"hh : mm\nMM - dd",value:3e5},{formatter:"hh : mm\nMM - dd",value:6e5},{formatter:"hh : mm\nMM - dd",value:9e5},{formatter:"hh : mm\nMM - dd",value:18e5},{formatter:"hh : mm\nMM - dd",value:36e5},{formatter:"hh : mm\nMM - dd",value:72e5},{formatter:"hh : mm\nMM - dd",value:216e5},{formatter:"hh : mm\nMM - dd",value:432e5},{formatter:"MM - dd\nyyyy",value:864e5},{formatter:"week",value:6048e5},{formatter:"month",value:26784e5},{formatter:"quarter",value:8208e6},{formatter:"half-year",value:16416e6},{formatter:"year",value:32832e6}];return{getAutoFormatter:t,getNewDate:h,format:i,nextMonday:n,nextNthPerNmonth:a,nextNthOnMonth:o,nextNthOnQuarterYear:s,nextNthOnHalfYear:r,nextNthOnYear:l}}),define("echarts/util/smartSteps",[],function(){function t(t){return w.log(I(t))/w.LN10}function e(t){return w.pow(10,t)}function i(t){return t===S(t)}function n(t,e,n,a){f=a||{},_=f.steps||L,b=f.secs||v,n=W(+n||0)%99,t=+t||0,e=+e||0,x=k=0,"min"in f&&(t=+f.min||0,x=1),"max"in f&&(e=+f.max||0,k=1),t>e&&(e=[t,t=e][0]);var o=e-t;if(x&&k)return U(t,e,n);if((n||5)>o){if(i(t)&&i(e))return c(t,e,n);if(0===o)return u(t,e,n)}return h(t,e,n)}function a(t,i,n,a){a=a||0;var r=o((i-t)/n,-1),l=o(t,-1,1),h=o(i,-1),d=w.min(r.e,l.e,h.e);0===l.c?d=w.min(r.e,h.e):0===h.c&&(d=w.min(r.e,l.e)),s(r,{c:0,e:d}),s(l,r,1),s(h,r),a+=d,t=l.c,i=h.c;for(var m=(i-t)/n,p=e(a),c=0,u=[],g=n+1;g--;)u[g]=(t+m*g)*p;if(0>a){c=y(p),m=+(m*p).toFixed(c),t=+(t*p).toFixed(c),i=+(i*p).toFixed(c);for(var g=u.length;g--;)u[g]=u[g].toFixed(c),0===+u[g]&&(u[g]="0")}else t*=p,i*=p,m*=p;return b=0,_=0,f=0,{min:t,max:i,secs:n,step:m,fix:c,exp:a,pnts:u}}function o(n,a,o){a=W(a%10)||2,0>a&&(i(n)?a=(""+I(n)).replace(/0+$/,"").length||1:(n=n.toFixed(15).replace(/0+$/,""),a=n.replace(".","").replace(/^[-0]+/,"").length,n=+n));var s=S(t(n))-a+1,r=+(n*e(-s)).toFixed(15)||0;return r=o?S(r):X(r),!r&&(s=0),(""+I(r)).length>a&&(s+=1,r/=10),{c:r,e:s}}function s(t,i,n){var a=i.e-t.e;a&&(t.e+=a,t.c*=e(-a),t.c=n?S(t.c):X(t.c))}function r(t,e,i){t.e<e.e?s(e,t,i):s(t,e,i)}function l(t,e){e=e||L,t=o(t);for(var i=t.c,n=0;i>e[n];)n++;if(!e[n])for(i/=10,t.e+=1,n=0;i>e[n];)n++;return t.c=e[n],t}function h(t,e,n){var r,h=n||+b.slice(-1),u=l((e-t)/h,_),y=o(e-t),U=o(t,-1,1),f=o(e,-1);if(s(y,u),s(U,u,1),s(f,u),n?r=m(U,f,h):h=d(U,f),i(t)&&i(e)&&t*e>=0){if(h>e-t)return c(t,e,h);h=p(t,e,n,U,f,h)}var L=g(t,e,U.c,f.c);return U.c=L[0],f.c=L[1],(x||k)&&V(t,e,U,f),a(U.c,f.c,h,f.e)}function d(t,i){for(var n,a,o,s,r=[],h=b.length;h--;)n=b[h],a=l((i.c-t.c)/n,_),a=a.c*e(a.e),o=S(t.c/a)*a,s=X(i.c/a)*a,r[h]={min:o,max:s,step:a,span:s-o};return r.sort(function(t,e){var i=t.span-e.span;return 0===i&&(i=t.step-e.step),i}),r=r[0],n=r.span/r.step,t.c=r.min,i.c=r.max,3>n?2*n:n}function m(t,i,n){for(var a,o,s=i.c,r=(i.c-t.c)/n-1;s>t.c;)r=l(r+1,_),r=r.c*e(r.e),a=r*n,o=X(i.c/r)*r,s=o-a;var h=t.c-s,d=o-i.c,m=h-d;return m>=2*r&&(m=S(m/r)*r,s+=m,o+=m),t.c=s,i.c=o,r}function p(t,n,a,o,s,r){var l=s.c-o.c,h=l/r*e(s.e);if(!i(h)&&(h=S(h),l=h*r,n-t>l&&(h+=1,l=h*r,!a&&h*(r-1)>=n-t&&(r-=1,l=h*r)),l>=n-t)){var d=l-(n-t);o.c=W(t-d/2),s.c=W(n+d/2),o.e=0,s.e=0}return r}function c(t,e,i){if(i=i||5,x)e=t+i;else if(k)t=e-i;else{var n=i-(e-t),o=W(t-n/2),s=W(e+n/2),r=g(t,e,o,s);t=r[0],e=r[1]}return a(t,e,i)}function u(t,e,i){i=i||5;var n=w.min(I(e/i),i)/2.1;return x?e=t+n:k?t=e-n:(t-=n,e+=n),h(t,e,i)}function g(t,e,i,n){return t>=0&&0>i?(n-=i,i=0):0>=e&&n>0&&(i-=n,n=0),[i,n]}function y(t){return t=(+t).toFixed(15).split("."),t.pop().replace(/0+$/,"").length}function V(t,e,i,n){if(x){var a=o(t,4,1);i.e-a.e>6&&(a={c:0,e:i.e}),r(i,a),r(n,a),n.c+=a.c-i.c,i.c=a.c}else if(k){var s=o(e,4);n.e-s.e>6&&(s={c:0,e:n.e}),r(i,s),r(n,s),i.c+=s.c-n.c,n.c=s.c}}function U(t,e,i){var n=i?[i]:b,r=e-t;if(0===r)return e=o(e,3),i=n[0],e.c=W(e.c+i/2),a(e.c-i,e.c,i,e.e);I(e/r)<1e-6&&(e=0),I(t/r)<1e-6&&(t=0);var l,h,d,m=[[5,10],[10,2],[50,10],[100,2]],p=[],c=[],u=o(e-t,3),g=o(t,-1,1),y=o(e,-1);s(g,u,1),s(y,u),r=y.c-g.c,u.c=r;for(var V=n.length;V--;){i=n[V],l=X(r/i),h=l*i-r,d=3*(h+3),d+=2*(i-n[0]+2),i%5===0&&(d-=10);for(var U=m.length;U--;)l%m[U][0]===0&&(d/=m[U][1]);c[V]=[i,l,h,d].join(),p[V]={secs:i,step:l,delta:h,score:d}}return p.sort(function(t,e){return t.score-e.score}),p=p[0],g.c=W(g.c-p.delta/2),y.c=W(y.c+p.delta/2),a(g.c,y.c,p.secs,u.e)}var f,_,b,x,k,L=[10,20,25,50],v=[4,5,6],w=Math,W=w.round,S=w.floor,X=w.ceil,I=w.abs;return n}),define("echarts/util/shape/HandlePolygon",["require","zrender/shape/Base","zrender/shape/Polygon","zrender/tool/util"],function(t){function e(t){i.call(this,t)}var i=t("zrender/shape/Base"),n=t("zrender/shape/Polygon"),a=t("zrender/tool/util");return e.prototype={type:"handle-polygon",buildPath:function(t,e){n.prototype.buildPath(t,e)},isCover:function(t,e){var i=this.getTansform(t,e);t=i[0],e=i[1];var n=this.style.rect;return t>=n.x&&t<=n.x+n.width&&e>=n.y&&e<=n.y+n.height?!0:!1}},a.inherits(e,i),e});