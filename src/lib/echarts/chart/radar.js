define("echarts/chart/radar",["require","./base","zrender/shape/Polygon","../component/polar","../config","../util/ecData","zrender/tool/util","zrender/tool/color","../util/accMath","../chart"],function(t){function e(t,e,n,a,o){i.call(this,t,e,n,a,o),this.refresh(a)}var i=t("./base"),n=t("zrender/shape/Polygon");t("../component/polar");var a=t("../config"),o=t("../util/ecData"),s=t("zrender/tool/util"),r=t("zrender/tool/color");return e.prototype={type:a.CHART_TYPE_RADAR,_buildShape:function(){this.selectedMap={},this._symbol=this.option.symbolList,this._queryTarget,this._dropBoxList=[],this._radarDataCounter=0;for(var t,e=this.series,i=this.component.legend,n=0,o=e.length;o>n;n++)e[n].type===a.CHART_TYPE_RADAR&&(this.serie=this.reformOption(e[n]),this.legendHoverLink=e[n].legendHoverLink||this.legendHoverLink,t=this.serie.name||"",this.selectedMap[t]=i?i.isSelected(t):!0,this.selectedMap[t]&&(this._queryTarget=[this.serie,this.option],this.deepQuery(this._queryTarget,"calculable")&&this._addDropBox(n),this._buildSingleRadar(n),this.buildMark(n)));this.addShapeList()},_buildSingleRadar:function(t){for(var e,i,n,a,o=this.component.legend,s=this.serie.data,r=this.deepQuery(this._queryTarget,"calculable"),l=0;l<s.length;l++)n=s[l].name||"",this.selectedMap[n]=o?o.isSelected(n):!0,this.selectedMap[n]&&(o?(i=o.getColor(n),e=o.getItemShape(n),e&&(e.style.brushType=this.deepQuery([s[l],this.serie],"itemStyle.normal.areaStyle")?"both":"stroke",o.setItemShape(n,e))):i=this.zr.getColor(l),a=this._getPointList(this.serie.polarIndex,s[l]),this._addSymbol(a,i,l,t,this.serie.polarIndex),this._addDataShape(a,i,s[l],t,l,r),this._radarDataCounter++)},_getPointList:function(t,e){for(var i,n,a=[],o=this.component.polar,s=0,r=e.value.length;r>s;s++)n=this.getDataFromOption(e.value[s]),i="-"!=n?o.getVector(t,s,n):!1,i&&a.push(i);return a},_addSymbol:function(t,e,i,n,a){for(var s,r=this.series,l=this.component.polar,h=0,d=t.length;d>h;h++)s=this.getSymbolShape(this.deepMerge([r[n].data[i],r[n]]),n,r[n].data[i].value[h],h,l.getIndicatorText(a,h),t[h][0],t[h][1],this._symbol[this._radarDataCounter%this._symbol.length],e,"#fff","vertical"),s.zlevel=this.getZlevelBase(),s.z=this.getZBase()+1,o.set(s,"data",r[n].data[i]),o.set(s,"value",r[n].data[i].value),o.set(s,"dataIndex",i),o.set(s,"special",h),this.shapeList.push(s)},_addDataShape:function(t,e,i,a,s,l){var h=this.series,d=[i,this.serie],p=this.getItemStyleColor(this.deepQuery(d,"itemStyle.normal.color"),a,s,i),c=this.deepQuery(d,"itemStyle.normal.lineStyle.width"),m=this.deepQuery(d,"itemStyle.normal.lineStyle.type"),u=this.deepQuery(d,"itemStyle.normal.areaStyle.color"),g=this.deepQuery(d,"itemStyle.normal.areaStyle"),y={zlevel:this.getZlevelBase(),z:this.getZBase(),style:{pointList:t,brushType:g?"both":"stroke",color:u||p||("string"==typeof e?r.alpha(e,.5):e),strokeColor:p||e,lineWidth:c,lineType:m},highlightStyle:{brushType:this.deepQuery(d,"itemStyle.emphasis.areaStyle")||g?"both":"stroke",color:this.deepQuery(d,"itemStyle.emphasis.areaStyle.color")||u||p||("string"==typeof e?r.alpha(e,.5):e),strokeColor:this.getItemStyleColor(this.deepQuery(d,"itemStyle.emphasis.color"),a,s,i)||p||e,lineWidth:this.deepQuery(d,"itemStyle.emphasis.lineStyle.width")||c,lineType:this.deepQuery(d,"itemStyle.emphasis.lineStyle.type")||m}};o.pack(y,h[a],a,i,s,i.name,this.component.polar.getIndicator(h[a].polarIndex)),l&&(y.draggable=!0,this.setCalculable(y)),y=new n(y),this.shapeList.push(y)},_addDropBox:function(t){var e=this.series,i=this.deepQuery(this._queryTarget,"polarIndex");if(!this._dropBoxList[i]){var n=this.component.polar.getDropBox(i);n.zlevel=this.getZlevelBase(),n.z=this.getZBase(),this.setCalculable(n),o.pack(n,e,t,void 0,-1),this.shapeList.push(n),this._dropBoxList[i]=!0}},ondragend:function(t,e){var i=this.series;if(this.isDragend&&t.target){var n=t.target,a=o.get(n,"seriesIndex"),s=o.get(n,"dataIndex");this.component.legend&&this.component.legend.del(i[a].data[s].name),i[a].data.splice(s,1),e.dragOut=!0,e.needRefresh=!0,this.isDragend=!1}},ondrop:function(e,i){var n=this.series;if(this.isDrop&&e.target){var a,s,r=e.target,l=e.dragged,h=o.get(r,"seriesIndex"),d=o.get(r,"dataIndex"),p=this.component.legend;if(-1===d)a={value:o.get(l,"value"),name:o.get(l,"name")},n[h].data.push(a),p&&p.add(a.name,l.style.color||l.style.strokeColor);else{var c=t("../util/accMath");a=n[h].data[d],p&&p.del(a.name),a.name+=this.option.nameConnector+o.get(l,"name"),s=o.get(l,"value");for(var m=0;m<s.length;m++)a.value[m]=c.accAdd(a.value[m],s[m]);p&&p.add(a.name,l.style.color||l.style.strokeColor)}i.dragIn=i.dragIn||!0,this.isDrop=!1}},refresh:function(t){t&&(this.option=t,this.series=t.series),this.backupShapeList(),this._buildShape()}},s.inherits(e,i),t("../chart").define("radar",e),e}),define("echarts/component/polar",["require","./base","zrender/shape/Text","zrender/shape/Line","zrender/shape/Polygon","zrender/shape/Circle","zrender/shape/Ring","../config","zrender/tool/util","../util/coordinates","../util/accMath","../util/smartSteps","../component"],function(t){function e(t,e,n,a,o){i.call(this,t,e,n,a,o),this.refresh(a)}var i=t("./base"),n=t("zrender/shape/Text"),a=t("zrender/shape/Line"),o=t("zrender/shape/Polygon"),s=t("zrender/shape/Circle"),r=t("zrender/shape/Ring"),l=t("../config"),h=t("zrender/tool/util"),d=t("../util/coordinates");return e.prototype={type:l.COMPONENT_TYPE_POLAR,_buildShape:function(){for(var t=0;t<this.polar.length;t++)this._index=t,this.reformOption(this.polar[t]),this._queryTarget=[this.polar[t],this.option],this._createVector(t),this._buildSpiderWeb(t),this._buildText(t),this._adjustIndicatorValue(t),this._addAxisLabel(t);for(var t=0;t<this.shapeList.length;t++)this.zr.addShape(this.shapeList[t])},_createVector:function(t){for(var e,i=this.polar[t],n=this.deepQuery(this._queryTarget,"indicator"),a=n.length,o=i.startAngle,s=2*Math.PI/a,r=this._getRadius(),l=i.__ecIndicator=[],h=0;a>h;h++)e=d.polar2cartesian(r,o*Math.PI/180+s*h),l.push({vector:[e[1],-e[0]]})},_getRadius:function(){var t=this.polar[this._index];return this.parsePercent(t.radius,Math.min(this.zr.getWidth(),this.zr.getHeight())/2)},_buildSpiderWeb:function(t){var e=this.polar[t],i=e.__ecIndicator,n=e.splitArea,a=e.splitLine,o=this.getCenter(t),s=e.splitNumber,r=a.lineStyle.color,l=a.lineStyle.width,h=a.show,d=this.deepQuery(this._queryTarget,"axisLine");this._addArea(i,s,o,n,r,l,h),d.show&&this._addLine(i,o,d)},_addAxisLabel:function(e){for(var i,a,o,s,a,r,l,d,p,c,m=t("../util/accMath"),u=this.polar[e],g=this.deepQuery(this._queryTarget,"indicator"),y=u.__ecIndicator,f=this.deepQuery(this._queryTarget,"splitNumber"),V=this.getCenter(e),U=0;U<g.length;U++)if(i=this.deepQuery([g[U],u,this.option],"axisLabel"),i.show){if(o={},o.textFont=this.getFont(),o=h.merge(o,i),o.lineWidth=o.width,a=y[U].vector,r=y[U].value,d=U/g.length*2*Math.PI,p=i.offset||10,c=i.interval||0,!r)return;for(var _=1;f>=_;_+=c+1)s=h.merge({},o),l=m.accAdd(r.min,m.accMul(r.step,_)),s.text=this.numAddCommas(l),s.x=_*a[0]/f+Math.cos(d)*p+V[0],s.y=_*a[1]/f+Math.sin(d)*p+V[1],this.shapeList.push(new n({zlevel:this.getZlevelBase(),z:this.getZBase(),style:s,draggable:!1,hoverable:!1}))}},_buildText:function(t){for(var e,i,a,o,s,r,l,h=this.polar[t],d=h.__ecIndicator,p=this.deepQuery(this._queryTarget,"indicator"),c=this.getCenter(t),m=0,u=0,g=0;g<p.length;g++)o=this.deepQuery([p[g],h,this.option],"name"),o.show&&(l=this.deepQuery([o,h,this.option],"textStyle"),i={},i.textFont=this.getFont(l),i.color=l.color,i.text="function"==typeof o.formatter?o.formatter.call(this.myChart,p[g].text,g):"string"==typeof o.formatter?o.formatter.replace("{value}",p[g].text):p[g].text,d[g].text=i.text,e=d[g].vector,a=Math.round(e[0])>0?"left":Math.round(e[0])<0?"right":"center",o.margin?(r=o.margin,m=e[0]>0?r:-r,u=e[1]>0?r:-r,m=0===e[0]?0:m,u=0===e[1]?0:u,e=this._mapVector(e,c,1)):e=this._mapVector(e,c,1.2),i.textAlign=a,i.x=e[0]+m,i.y=e[1]+u,s=o.rotate?[o.rotate/180*Math.PI,e[0],e[1]]:[0,0,0],this.shapeList.push(new n({zlevel:this.getZlevelBase(),z:this.getZBase(),style:i,draggable:!1,hoverable:!1,rotation:s})))},getIndicatorText:function(t,e){return this.polar[t]&&this.polar[t].__ecIndicator[e]&&this.polar[t].__ecIndicator[e].text},getDropBox:function(t){var e,i,t=t||0,n=this.polar[t],a=this.getCenter(t),o=n.__ecIndicator,s=o.length,r=[],l=n.type;if("polygon"==l){for(var h=0;s>h;h++)e=o[h].vector,r.push(this._mapVector(e,a,1.2));i=this._getShape(r,"fill","rgba(0,0,0,0)","",1)}else"circle"==l&&(i=this._getCircle("",1,1.2,a,"fill","rgba(0,0,0,0)"));return i},_addArea:function(t,e,i,n,a,o,s){for(var r,l,h,d,p=this.deepQuery(this._queryTarget,"type"),c=0;e>c;c++)l=(e-c)/e,s&&("polygon"==p?(d=this._getPointList(t,l,i),r=this._getShape(d,"stroke","",a,o)):"circle"==p&&(r=this._getCircle(a,o,l,i,"stroke")),this.shapeList.push(r)),n.show&&(h=(e-c-1)/e,this._addSplitArea(t,n,l,h,i,c))},_getCircle:function(t,e,i,n,a,o){var r=this._getRadius();return new s({zlevel:this.getZlevelBase(),z:this.getZBase(),style:{x:n[0],y:n[1],r:r*i,brushType:a,strokeColor:t,lineWidth:e,color:o},hoverable:!1,draggable:!1})},_getRing:function(t,e,i,n){var a=this._getRadius();return new r({zlevel:this.getZlevelBase(),z:this.getZBase(),style:{x:n[0],y:n[1],r:e*a,r0:i*a,color:t,brushType:"fill"},hoverable:!1,draggable:!1})},_getPointList:function(t,e,i){for(var n,a=[],o=t.length,s=0;o>s;s++)n=t[s].vector,a.push(this._mapVector(n,i,e));return a},_getShape:function(t,e,i,n,a){return new o({zlevel:this.getZlevelBase(),z:this.getZBase(),style:{pointList:t,brushType:e,color:i,strokeColor:n,lineWidth:a},hoverable:!1,draggable:!1})},_addSplitArea:function(t,e,i,n,a,o){var s,r,l,h,d,p=t.length,c=e.areaStyle.color,m=[],p=t.length,u=this.deepQuery(this._queryTarget,"type");if("string"==typeof c&&(c=[c]),r=c.length,s=c[o%r],"polygon"==u)for(var g=0;p>g;g++)m=[],l=t[g].vector,h=t[(g+1)%p].vector,m.push(this._mapVector(l,a,i)),m.push(this._mapVector(l,a,n)),m.push(this._mapVector(h,a,n)),m.push(this._mapVector(h,a,i)),d=this._getShape(m,"fill",s,"",1),this.shapeList.push(d);else"circle"==u&&(d=this._getRing(s,i,n,a),this.shapeList.push(d))},_mapVector:function(t,e,i){return[t[0]*i+e[0],t[1]*i+e[1]]},getCenter:function(t){var t=t||0;return this.parseCenter(this.zr,this.polar[t].center)},_addLine:function(t,e,i){for(var n,a,o=t.length,s=i.lineStyle,r=s.color,l=s.width,h=s.type,d=0;o>d;d++)a=t[d].vector,n=this._getLine(e[0],e[1],a[0]+e[0],a[1]+e[1],r,l,h),this.shapeList.push(n)},_getLine:function(t,e,i,n,o,s,r){return new a({zlevel:this.getZlevelBase(),z:this.getZBase(),style:{xStart:t,yStart:e,xEnd:i,yEnd:n,strokeColor:o,lineWidth:s,lineType:r},hoverable:!1})},_adjustIndicatorValue:function(e){for(var i,n,a=this.polar[e],o=this.deepQuery(this._queryTarget,"indicator"),s=o.length,r=a.__ecIndicator,l=this._getSeriesData(e),h=a.boundaryGap,d=a.splitNumber,p=a.scale,c=t("../util/smartSteps"),m=0;s>m;m++){if("number"==typeof o[m].max)i=o[m].max,n=o[m].min||0;else{var u=this._findValue(l,m,d,h);n=u.min,i=u.max}!p&&n>=0&&i>=0&&(n=0),!p&&0>=n&&0>=i&&(i=0);var g=c(n,i,d);r[m].value={min:g.min,max:g.max,step:g.step}}},_getSeriesData:function(t){for(var e,i,n,a=[],o=this.component.legend,s=0;s<this.series.length;s++)if(e=this.series[s],e.type==l.CHART_TYPE_RADAR){i=e.data||[];for(var r=0;r<i.length;r++)n=this.deepQuery([i[r],e,this.option],"polarIndex")||0,n!=t||o&&!o.isSelected(i[r].name)||a.push(i[r])}return a},_findValue:function(t,e,i,n){function a(t){(t>o||void 0===o)&&(o=t),(s>t||void 0===s)&&(s=t)}var o,s,r;if(t&&0!==t.length){if(1==t.length&&(s=0),1!=t.length)for(var l=0;l<t.length;l++)a(this.getDataFromOption(t[l].value[e]));else{r=t[0];for(var l=0;l<r.value.length;l++)a(this.getDataFromOption(r.value[l]))}var h=Math.abs(o-s);return s-=Math.abs(h*n[0]),o+=Math.abs(h*n[1]),s===o&&(0===o?o=1:o>0?s=o/i:o/=i),{max:o,min:s}}},getVector:function(t,e,i){t=t||0,e=e||0;var n=this.polar[t].__ecIndicator;if(!(e>=n.length)){var a,o=this.polar[t].__ecIndicator[e],s=this.getCenter(t),r=o.vector,l=o.value.max,h=o.value.min;if("undefined"==typeof i)return s;switch(i){case"min":i=h;break;case"max":i=l;break;case"center":i=(l+h)/2}return a=l!=h?(i-h)/(l-h):.5,this._mapVector(r,s,a)}},isInside:function(t){var e=this.getNearestIndex(t);return e?e.polarIndex:-1},getNearestIndex:function(t){for(var e,i,n,a,o,s,r,l,h,p=0;p<this.polar.length;p++){if(e=this.polar[p],i=this.getCenter(p),t[0]==i[0]&&t[1]==i[1])return{polarIndex:p,valueIndex:0};if(n=this._getRadius(),o=e.startAngle,s=e.indicator,r=s.length,l=2*Math.PI/r,a=d.cartesian2polar(t[0]-i[0],i[1]-t[1]),t[0]-i[0]<0&&(a[1]+=Math.PI),a[1]<0&&(a[1]+=2*Math.PI),h=a[1]-o/180*Math.PI+2*Math.PI,Math.abs(Math.cos(h%(l/2)))*n>a[0])return{polarIndex:p,valueIndex:Math.floor((h+l/2)/l)%r}}},getIndicator:function(t){var t=t||0;return this.polar[t].indicator},refresh:function(t){t&&(this.option=t,this.polar=this.option.polar,this.series=this.option.series),this.clear(),this._buildShape()}},h.inherits(e,i),t("../component").define("polar",e),e}),define("echarts/util/coordinates",["require","zrender/tool/math"],function(t){function e(t,e){return[t*n.sin(e),t*n.cos(e)]}function i(t,e){return[Math.sqrt(t*t+e*e),Math.atan(e/t)]}var n=t("zrender/tool/math");return{polar2cartesian:e,cartesian2polar:i}}),define("echarts/util/smartSteps",[],function(){function t(t){return w.log(I(t))/w.LN10}function e(t){return w.pow(10,t)}function i(t){return t===W(t)}function n(t,e,n,a){U=a||{},_=U.steps||v,b=U.secs||L,n=S(+n||0)%99,t=+t||0,e=+e||0,x=k=0,"min"in U&&(t=+U.min||0,x=1),"max"in U&&(e=+U.max||0,k=1),t>e&&(e=[t,t=e][0]);var o=e-t;if(x&&k)return V(t,e,n);if((n||5)>o){if(i(t)&&i(e))return m(t,e,n);if(0===o)return u(t,e,n)}return h(t,e,n)}function a(t,i,n,a){a=a||0;var r=o((i-t)/n,-1),l=o(t,-1,1),h=o(i,-1),d=w.min(r.e,l.e,h.e);0===l.c?d=w.min(r.e,h.e):0===h.c&&(d=w.min(r.e,l.e)),s(r,{c:0,e:d}),s(l,r,1),s(h,r),a+=d,t=l.c,i=h.c;for(var p=(i-t)/n,c=e(a),m=0,u=[],g=n+1;g--;)u[g]=(t+p*g)*c;if(0>a){m=y(c),p=+(p*c).toFixed(m),t=+(t*c).toFixed(m),i=+(i*c).toFixed(m);for(var g=u.length;g--;)u[g]=u[g].toFixed(m),0===+u[g]&&(u[g]="0")}else t*=c,i*=c,p*=c;return b=0,_=0,U=0,{min:t,max:i,secs:n,step:p,fix:m,exp:a,pnts:u}}function o(n,a,o){a=S(a%10)||2,0>a&&(i(n)?a=(""+I(n)).replace(/0+$/,"").length||1:(n=n.toFixed(15).replace(/0+$/,""),a=n.replace(".","").replace(/^[-0]+/,"").length,n=+n));var s=W(t(n))-a+1,r=+(n*e(-s)).toFixed(15)||0;return r=o?W(r):X(r),!r&&(s=0),(""+I(r)).length>a&&(s+=1,r/=10),{c:r,e:s}}function s(t,i,n){var a=i.e-t.e;a&&(t.e+=a,t.c*=e(-a),t.c=n?W(t.c):X(t.c))}function r(t,e,i){t.e<e.e?s(e,t,i):s(t,e,i)}function l(t,e){e=e||v,t=o(t);for(var i=t.c,n=0;i>e[n];)n++;if(!e[n])for(i/=10,t.e+=1,n=0;i>e[n];)n++;return t.c=e[n],t}function h(t,e,n){var r,h=n||+b.slice(-1),u=l((e-t)/h,_),y=o(e-t),V=o(t,-1,1),U=o(e,-1);if(s(y,u),s(V,u,1),s(U,u),n?r=p(V,U,h):h=d(V,U),i(t)&&i(e)&&t*e>=0){if(h>e-t)return m(t,e,h);h=c(t,e,n,V,U,h)}var v=g(t,e,V.c,U.c);return V.c=v[0],U.c=v[1],(x||k)&&f(t,e,V,U),a(V.c,U.c,h,U.e)}function d(t,i){for(var n,a,o,s,r=[],h=b.length;h--;)n=b[h],a=l((i.c-t.c)/n,_),a=a.c*e(a.e),o=W(t.c/a)*a,s=X(i.c/a)*a,r[h]={min:o,max:s,step:a,span:s-o};return r.sort(function(t,e){var i=t.span-e.span;return 0===i&&(i=t.step-e.step),i}),r=r[0],n=r.span/r.step,t.c=r.min,i.c=r.max,3>n?2*n:n}function p(t,i,n){for(var a,o,s=i.c,r=(i.c-t.c)/n-1;s>t.c;)r=l(r+1,_),r=r.c*e(r.e),a=r*n,o=X(i.c/r)*r,s=o-a;var h=t.c-s,d=o-i.c,p=h-d;return p>=2*r&&(p=W(p/r)*r,s+=p,o+=p),t.c=s,i.c=o,r}function c(t,n,a,o,s,r){var l=s.c-o.c,h=l/r*e(s.e);if(!i(h)&&(h=W(h),l=h*r,n-t>l&&(h+=1,l=h*r,!a&&h*(r-1)>=n-t&&(r-=1,l=h*r)),l>=n-t)){var d=l-(n-t);o.c=S(t-d/2),s.c=S(n+d/2),o.e=0,s.e=0}return r}function m(t,e,i){if(i=i||5,x)e=t+i;else if(k)t=e-i;else{var n=i-(e-t),o=S(t-n/2),s=S(e+n/2),r=g(t,e,o,s);t=r[0],e=r[1]}return a(t,e,i)}function u(t,e,i){i=i||5;var n=w.min(I(e/i),i)/2.1;return x?e=t+n:k?t=e-n:(t-=n,e+=n),h(t,e,i)}function g(t,e,i,n){return t>=0&&0>i?(n-=i,i=0):0>=e&&n>0&&(i-=n,n=0),[i,n]}function y(t){return t=(+t).toFixed(15).split("."),t.pop().replace(/0+$/,"").length}function f(t,e,i,n){if(x){var a=o(t,4,1);i.e-a.e>6&&(a={c:0,e:i.e}),r(i,a),r(n,a),n.c+=a.c-i.c,i.c=a.c}else if(k){var s=o(e,4);n.e-s.e>6&&(s={c:0,e:n.e}),r(i,s),r(n,s),i.c+=s.c-n.c,n.c=s.c}}function V(t,e,i){var n=i?[i]:b,r=e-t;if(0===r)return e=o(e,3),i=n[0],e.c=S(e.c+i/2),a(e.c-i,e.c,i,e.e);I(e/r)<1e-6&&(e=0),I(t/r)<1e-6&&(t=0);var l,h,d,p=[[5,10],[10,2],[50,10],[100,2]],c=[],m=[],u=o(e-t,3),g=o(t,-1,1),y=o(e,-1);s(g,u,1),s(y,u),r=y.c-g.c,u.c=r;for(var f=n.length;f--;){i=n[f],l=X(r/i),h=l*i-r,d=3*(h+3),d+=2*(i-n[0]+2),i%5===0&&(d-=10);for(var V=p.length;V--;)l%p[V][0]===0&&(d/=p[V][1]);m[f]=[i,l,h,d].join(),c[f]={secs:i,step:l,delta:h,score:d}}return c.sort(function(t,e){return t.score-e.score}),c=c[0],g.c=S(g.c-c.delta/2),y.c=S(y.c+c.delta/2),a(g.c,y.c,c.secs,u.e)}var U,_,b,x,k,v=[10,20,25,50],L=[4,5,6],w=Math,S=w.round,W=w.floor,X=w.ceil,I=w.abs;return n});